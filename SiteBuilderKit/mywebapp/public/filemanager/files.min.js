var Files=function(){"use strict";return class{constructor(e,t={}){this.settings=Object.assign(this,{onSelect:()=>{},onCancel:()=>{},allowedFileTypes:["image/jpeg","image/png","image/gif","image/webp","image/bmp","image/tiff","image/svg+xml","image/vnd.adobe.photoshop","video/mp4","video/quicktime","audio/mpeg","application/json","application/font","application/pdf","application/zip","application/x-rar-compressed","application/msword","application/rtf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/csv","text/markdown","text/plain","text/css","text/javascript","text/html"],filePicker:!1,validFileNamePattern:/^[a-zA-Z0-9_.-]+$/,showRelativeTime:!1,locale:"default",dateShortOptions:{year:"numeric",month:"short",day:"numeric"},dateLongOptions:{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},defaultHeaders:{"Content-Type":"application/json"},headers:{},refreshButton:!1,demoMode:!1,demoMessage:"This function is disabled in this demo.",enableBuilder:!1,builder:"edit.html"},t),window._txt&&(this.settings.lang=window._txt);let n=document.querySelector("#_libhtml");n||(n=document.createElement("div"),n.id="_libhtml",n.style.visibility="hidden",n.className="is-ui",document.body.appendChild(n),n=document.querySelector("#_libhtml")),this.libStuff=n;let o=`\n        <div class="modal-overlay">\n            <svg class="spinner" width="40px" height="40px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">\n                <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>\n            </svg>\n        </div>\n\n        <div class="is-modal modal-view">\n            \x3c!--\n            <button class="btn-close">\n                <svg><use xlink:href="#icon-zoom-out"></use></svg>\n            </button>\n            --\x3e\n            <div class="modal-content">\n            </div>\n        </div>\n\n        <div class="is-modal modal-prompts">\n            <div class="modal-content">\n                <button class="btn-close">\n                    <svg><use xlink:href="#icon-close"></use></svg>\n                </button>\n                <div class="prompt-list"></div>\n            </div>\n        </div>\n\n        <div class="is-modal modal-textedit">\n            <div class="modal-content">\n\n                <textarea class="inp-textedit"></textarea>\n    \n                <div class="flex justify-end w-full">\n                    <div class="save-info flex items-center"></div>\n                    <div class="flex">\n                        <button class="btn-cancel mr-4" title="${this.out("Cancel")}">${this.out("Cancel")}</button>\n                        <button class="btn-save-file" title="${this.out("Save")}">${this.out("Save")}</button>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n\n        <div class="is-modal modal-htmledit">\n            <div class="modal-content">\n\n\n            </div>\n        </div>\n\n        <div class="panel">\n\n            <div class="panel-side">\n                <div class="flex tabs" role="tablist">\n                    <button class="tab-button tab-tree w-full active" role="tab" aria-selected="true" tabindex="0">\n                        ${this.out("Folders")}\n                    </button>\n                    <button class="tab-button tab-generate-image w-full" role="tab" aria-selected="false" tabindex="0">\n                        ${this.out("Generate Image")}\n                    </button>\n                </div>\n\n                <div class="tab-content tab-content-tree active" role="tabpanel">\n                    <div class="div-tree"></div>\n                </div>\n                <div class="tab-content tab-content-generate-image" role="tabpanel">\n\n                    <h1 class="mb-6">${this.out("Generate Image")}</h1>\n\n                    <label for="inpModel">${this.out("Model")}:</label>\n\n                    <select id="inpModel" class="inp-model">\n\n                        <option disabled value="space">&nbsp;</option>\n                        <option disabled value="Anime & Styles">${this.out("ANIME & STYLES")}</option>\n                        \n                        <option value="eimis-anime-diffusion-v1-0">Anime Diffusion</option>\n                        <option value="arcane-diffusion">Arcane Diffusion</option>\n                        <option value="dark-sushi-mix-v2-25">Dark Sushi Mix v2.25</option>\n                        <option value="mo-di-diffusion">Modern Disney Diffusion</option>\n                        <option value="neverending-dream">NeverEnding Dream</option>\n                        <option value="something-v2-2">Something V2.2</option>\n                        <option value="synthwave-punk-v2">SynthwavePunk v2</option>\n\n                        <option disabled value="space">&nbsp;</option>\n                        <option disabled value="Art">${this.out("ART")}</option>\n                        \n                        <option value="moonfilm-utopia-v3">MoonFilm Utopia v3</option>\n                        <option value="openjourney-v1-0">Openjourney</option>\n                        <option value="openjourney-v4">Openjourney v4</option>\n                        <option value="anashel-rpg">RPG</option>\n                        <option value="stable-diffusion-v1-5">Stable Diffusion v1.5</option>\n                        <option value="stable-diffusion-v2-1">Stable Diffusion v2.1</option>\n                        <option value="van-gogh-diffusion">Van Gogh Diffusion</option>\n\n                        <option disabled value="space">&nbsp;</option>\n                        <option disabled value="Design">${this.out("DESIGN")}</option>\n                        \n                        <option value="xsarchitectural-interior-design">InteriorDesign</option>\n                        \n                        <option disabled value="space">&nbsp;</option>\n                        <option disabled value="Photorealism">${this.out("PHOTOREALISM")}</option>\n                        \n                        <option value="absolute-reality-v1-6">AbsoluteReality v1.6</option>\n                        <option value="analog-diffusion">Analog Diffusion</option>\n                        <option value="flux-schnell">FLUX.1 [schnell]</option>\n                        <option value="icbinp">ICBINP</option>\n                        <option value="icbinp-afterburn">ICBINP Afterburn</option>\n                        <option value="icbinp-final">ICBINP Final</option>\n                        <option value="icbinp-relapse">ICBINP Relapse</option>\n                        <option value="moonfilm-film-grain-v1">MoonFilm FilmGrain v1</option>\n                        <option value="moonfilm-reality-v3">MoonFilm Reality v3</option>\n                        <option value="realistic-vision-v1-3">Realistic Vision v1.3</option>\n                        <option value="realistic-vision-v3">Realistic Vision v3</option>\n                        <option value="realistic-vision-v5-1">Realistic Vision v5.1</option>\n                        <option value="realvis-xl-v4">RealVisXL V4.0</option>\n                    </select>\n\n                    <div class="flex justify-between align-center">\n                        <label for="inpPrompt">${this.out("Prompt")}:</label>\n                    </div>\n                    <textarea id="inpPrompt" class="inp-prompt p-2 rounded flex-none"></textarea>\n\n                    <div class="text-right">\n                        <a href="#" class="link-history text-sm underline">${this.out("history")}</a>\n                    </div>\n\n                    <div class="div-neg-prompt flex flex-col">\n                        <label for="inpNegPrompt">${this.out("Negative Prompt")}:</label>\n                        <input id="inpNegPrompt" type="text" class="inp-neg-prompt p-2 rounded mb-4 w-full" value=""></input>\n                    </div>\n\n                    <div class="flex">\n                        <div class="mr-2">\n                            <label>${this.out("Width")}: <span class="val-width" style="width:60px;display:inline-block;">512</span></label>\n                            <input type="range" min="256" max="1024" step="64" value="512" class="inp-width is-rangeslider">\n                        </div>\n                        <div class="ml-2">\n                            <label>${this.out("Height")}: <span class="val-height" style="width:60px;display:inline-block;">512</span></label>\n                            <input type="range" min="256" max="1024" step="64" value="512" class="inp-height is-rangeslider">\n                        </div>\n                    </div>\n\n                    <div class="div-img-control">\n                        <h2 class="mt-5 mb-3">${this.out("Image Control")}</h2>\n\n                        <div class="flex items-end mb-3">\n                            <div class="div-img-control-preview flex w-32 h-32 flex-none border">\n                            </div>\n                            <button class="btn-clear-control-image p-0 ml-2" style="width:30px;height:30px;"><svg style="width:17px;height:17px;flex:none"><use xlink:href="#icon-trash"></use></svg></button>\n                        </div>\n\n                        <label for="inpControlNet">${this.out("Guided Output")}:</label>\n                        <select id="inpControlNet" class="inp-controlnet mb-1 w-full">\n                            <option value="canny-1.1" selected>Hard Edges</option>\n                            <option value="softedge-1.1">Soft Edges</option>\n                            <option value="mlsd-1.1">Straight Lines</option>\n                            <option value="normal-1.1">Normal Map</option>\n                            <option value="depth-1.1">Depth</option>\n                            <option value="openpose-1.1">Pose</option>\n                            <option value="openpose-full-1.1">Full Body</option>\n                            <option value="scribble-1.1">Scribble</option>\n                            <option value="lineart-1.1">Lineart</option>\n                            <option value="lineart-anime-1.1">Lineart Anime</option>\n                            <option value="mediapipeface">Face</option>\n                        </select>\n                    </div>\n\n                    <div class="div-advance">\n                        <h2 class="mt-5 mb-3">${this.out("Advanced")}</h2>\n\n                        <div class="flex mb-3">\n                            <div class="mr-2">\n                                <label>${this.out("Steps")}: <span class="val-steps" style="width:32px;display:inline-block;">25</span></label>\n                                <input type="range" min="1" max="100" value="25" class="inp-steps is-rangeslider">\n                            </div>\n                            <div class="ml-2">\n                                <label>${this.out("Guidance")}: <span class="val-guidance" style="width:32px;display:inline-block;">7.5</span></label>\n                                <input type="range" min="0" max="20" step="0.5" value="7.5" class="inp-guidance is-rangeslider">\n                            </div>\n                        </div>\n\n                        <label for="inpSampler">${this.out("Sampler")}:</label>\n                        <select id="inpSampler" class="inp-sampler">\n                            <option value="euler_a">Euler Ancestral</option>\n                            <option value="euler">Euler</option>\n                            <option value="lms">LMS</option>\n                            <option value="dpmsolver++" selected>DPM-Solver++</option>\n                            <option value="pndm">PLMS</option>\n                            <option value="ddim">DDIM</option>\n                            \x3c!--\n                            <option value="kdpm2">DPM Karras</option>\n                            <option value="kdpm2_a">DPM Karras Ancestral</option>\n                            <option value="heun">Heun</option>\n                            <option value="unipc">UniPC</option>\n                            <option value="deis">DEIS</option>\n                            <option value="dpmsolver_sde">DPM-Solver SDE</option>\n                            --\x3e\n                        </select>\n                    </div>\n\n                    <button class="btn-generate mt-4">\n                        ${this.out("Generate")}\n                    </button>\n\n                </div>\n            </div>\n\n            <div class="panel-files">\n\n                <div class="file-list-controls">\n                    <div class="div-breadcrumb mr-6"></div>\n                    <div class="dragdrop-info flex items-center">${this.out("Drag and drop files here")}<svg style="width:20px;height:20px;margin-bottom:-10px;flex:none"><use xlink:href="#icon-here"></use></svg></div>\n                    <div class="div-buttons flex justify-end">\n                        <label class="div-selectall flex items-center justify-center mr-5 mt-2 cursor-pointer" style="display:none;">\n                            <input class="chk-selectall mr-1 cursor-pointer" type="checkbox"> <span>${this.out("Select All")}</span>\n                        </label>\n                        ${this.refreshButton?`\n                        <button class="btn-refresh tooltip relative ml-2" title="${this.out("Refresh")}" style="width:55px;"><svg><use xlink:href="#icon-refresh"></use></svg></button>\n                        `:""}\n                        \x3c!--\n                        <button class="btn-listview tooltip relative ml-2" title="${this.out("List")}" style="width:55px;height:44px"><svg style="width:22px;height:22px"><use xlink:href="#icon-list"></use></svg></button>\n                        <button class="btn-iconsview tooltip relative ml-2" title="${this.out("Thumbnails")}" style="width:55px;height:44px"><svg style="width:22px;height:22px"><use xlink:href="#icon-icons"></use></svg></button>\n                        <button class="btn-thumbnailview tooltip relative ml-2 mr-5" title="${this.out("Thumbnails")}" style="width:55px;height:44px"><svg style="width:22px;height:22px"><use xlink:href="#icon-thumbnails"></use></svg></button>\n                        --\x3e\n                        <button class="btn-filemore tooltip relative ml-2" title="${this.out("File Info")}" style="width:55px;height:44px"><svg style="width:22px;height:22px"><use xlink:href="#icon-info"></use></svg></button>\n                        <button class="btn-upload tooltip relative ml-2" title="${this.out("Upload")}" style="width:55px;"><svg><use xlink:href="#icon-upload"></use></svg></button>\n                        <button class="btn-folder tooltip relative ml-2" title="${this.out("Create Folder")}" style="width:55px;"><svg><use xlink:href="#icon-folder-plus"></use></svg></button>\n                        <button class="btn-rename tooltip relative ml-2" title="${this.out("Rename")}" style="display:none;">${this.out("Rename")}</button>\n                        <button class="btn-move-files tooltip relative ml-2" title="${this.out("Move")}" style="display:none;">${this.out("Move")}</button>\n                        <button class="btn-delete-files tooltip relative ml-2" title="${this.out("Delete Selected")}" style="display:none;">${this.out("Delete Selected")}</button>\n                        <button class="btn-toggle-select tooltip relative ml-2" title="${this.out("Select")}"><svg class="mr-1"><use xlink:href="#icon-files"></use></svg><span>${this.out("Select")}</span></button>\n                        \n                        <button class="btn-settings tooltip relative ml-2" title="${this.out("More")}" style="width:55px;height:44px"><svg style="width:19px;height:19px"><use xlink:href="#icon-dots-vertical"></use></svg></button>\n                        \n                    </div>\n                </div>\n\n                <input type="file" class="inp-files" multiple style="display: none;">\n                \n                <div class="file-list-wrapper">\n                    \n                    <progress class="is-progress-bar w-full" value="0" max="100" style="display:none"></progress>\n                    \n                    <ul class="file-list"></ul>\n\n                    <div class="file-info">\n\n                        <button class="btn-close tooltip" title="${this.out("Close")}">\n                            <svg><use xlink:href="#icon-close-right"></use></svg>\n                        </button>\n\n                        <div class="file-info-details">\n\n                            <div class="div-filename"></div>\n                        \n                            <table class="table-file-info mt-3"> \n                                <tr>\n                                    <td>${this.out("Size")}:</div>\n                                    <td>\n                                        <div class="div-filesize">30 KB</div>\n                                    </td>\n                                </tr>\n                                <tr class="dimension-info">\n                                    <td>${this.out("Dimensions")}:</div>\n                                    <td>\n                                        <div class="div-dimension"></div>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="vertical-align: top;">${this.out("Last updated")}:</div>\n                                    <td>\n                                        <div class="div-modifieddate"></div>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="vertical-align: top;">${this.out("URL")}:</div>\n                                    <td>\n                                        <div class="div-url"></div>\n                                    </td>\n                                </tr>\n                            </table>   \n                \n                            <div class="div-imagepreview mt-3">\n                            </div>\n                \n                            <div class="flex mt-5">\n                                <button class="btn-edit w-full mr-1 tooltip relative" title="${this.out("Edit")}">\n                                    <svg style="width:19px;height:19px;margin-right:4px"><use xlink:href="#icon-edit"></use></svg>\n                                </button>\n                                <button class="btn-view w-full mr-1 tooltip relative" title="${this.out("View")}">\n                                    <svg style="width:19px;height:19px;margin-right:4px"><use xlink:href="#icon-zoom-in"></use></svg>\n                                </button>\n                                <button class="btn-download w-full mr-1 tooltip relative" title="${this.out("Download")}">\n                                    <svg style="width:19px;height:19px;margin-right:4px"><use xlink:href="#icon-download"></use></svg>\n                                </button>\n                                <button class="btn-open w-full tooltip relative" title="${this.out("Open")}">\n                                    <svg style="width:19px;height:19px;margin-right:4px"><use xlink:href="#icon-open"></use></svg>\n                                </button>\n                            </div>\n                            \n                            <div class="flex mt-1">\n                                <button class="btn-upscale px-3 w-full mr-1 tooltip relative" title="${this.out("Upscale")}">\n                                    <svg style="width:20px;height:20px;margin-right:4px"><use xlink:href="#icon-upscale"></use></svg>\n                                </button>\n                                <button class="btn-control-image px-3 w-full tooltip relative" title="${this.out("Use as image control")}">\n                                    <svg style="width:17px;height:17px;margin-right:4px"><use xlink:href="#icon-plus"></use></svg>\n                                </button>\n                            </div>\n\n                        </div>\n\n                        <div class="no-selection-info">\n\n                        </div>\n\n                    </div>\n                </div>\n\n                <div class="file-picker flex justify-end mt-4">\n                    <input type="text" class="inp-url p-2 rounded flex-grow mr-2${this.urlInput?"":" hidden"}">\n                    <button class="btn-cancel mr-4" title="${this.out("Cancel")}">${this.out("Cancel")}</button>\n                    <button class="btn-select w-36">${this.out("Select")}</button>\n                </div>\n            </div>\n\n        </div>\n\n        <div class="is-pop pop-movefiles">\n            <div class="div-folders">\n            </div>\n        </div>\n        <div class="is-pop pop-rename">\n\n            <input type="text" class="inp-rename-to p-2 rounded mb-4" value=""></input>\n\n            <button class="btn-rename-to" title="${this.out("Rename")}">${this.out("Rename")}</button>\n        </div>\n        <div class="is-pop pop-folder">\n\n            <input type="text" class="inp-folder-name p-2 rounded mb-4" value="" placeholder="${this.out("Enter folder name")}"></input>\n\n            <button class="btn-create-folder" title="${this.out("Create Folder")}">${this.out("Create Folder")}</button>\n        </div>\n        <div class="is-pop pop-settings">\n\n            <div class="flex">\n                <button class="btn-view-list w-full mr-1 tooltip relative" title="${this.out("View as List")}">\n                    <svg><use xlink:href="#icon-list"></use></svg>\n                    <span>${this.out("List")}</span>\n                </button>\n                <button class="btn-view-icons w-full mr-1 tooltip relative hidden" title="${this.out("View as Icons")}">\n                    <svg><use xlink:href="#icon-icons"></use></svg>\n                    <span>${this.out("Icons")}</span>\n                </button>\n                <button class="btn-view-thumbnails w-full mr-1 tooltip relative" title="${this.out("View as Gallery")}">\n                    <svg><use xlink:href="#icon-thumbnails"></use></svg>\n                    <span>${this.out("Gallery")}</span>\n                </button>\n            </div>\n\n            <div class="gallery-settings flex mt-5" style="display:none">\n                <button class="btn-gallery-xs w-full mr-1 tooltip relative" title="${this.out("XS")}">\n                    <span>${this.out("XS")}</span>\n                </button>\n                <button class="btn-gallery-sm w-full mr-1 tooltip relative" title="${this.out("SM")}">\n                    <span>${this.out("SM")}</span>\n                </button>\n                <button class="btn-gallery-m w-full mr-1 tooltip relative" title="${this.out("M")}">\n                    <span>${this.out("M")}</span>\n                </button>\n                <button class="btn-gallery-lg w-full mr-1 tooltip relative" title="${this.out("LG")}">\n                    <span>${this.out("LG")}</span>\n                </button>\n                <button class="btn-gallery-xl w-full mr-1 tooltip relative" title="${this.out("XL")}">\n                    <span>${this.out("XL")}</span>\n                </button>\n            </div>\n\n            <label class="label-show-filesize mt-5">\n                <input class="chk-filesize mr-2" type="checkbox">\n                <span>${this.out("File Size")}</span>\n            </label>\n\n            <label class="label-show-modifieddate mt-2">\n                <input class="chk-modifieddate mr-2" type="checkbox">\n                <span>${this.out("Date last updated")}</span>\n            </label>\n\n        </div>\n\n        <svg width="0" height="0" style="position:absolute;display:none;">\n            <defs>\n                <symbol id="icon-close" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M18 6l-12 12"></path>\n                    <path d="M6 6l12 12"></path>\n                </symbol>\n                <symbol viewBox="0 0 512 512" id="icon-movie" stroke-width="0.7">\n                    <path d="M0 360h400v-336h-400v336zM72 40v48h-56v-48h56zM72 104v48h-56v-48h56zM72 168v48h-56v-48h56zM72 232v48h-56v-48h56zM72 296v48h-56v-48h56zM312 40v144h-224v-144h224zM312 200v144h-224v-144h224zM384 40v48h-56v-48h56zM384 104v48h-56v-48h56zM384 168v48h-56v-48\n                    h56zM384 232v48h-56v-48h56zM384 296v48h-56v-48h56z"></path>\n                </symbol>\n                <symbol viewBox="0 0 512 512" id="icon-audio" stroke-width="0.7">\n                    <path d="M270 407.7V104.4L175.3 192H71v128h104.3zm56.3-52.1c20.5-27.8 32.8-62.3 32.8-99.6 0-37.4-12.3-71.8-32.8-99.6l-20.4 15.3c17.4 23.6 27.8 52.7 27.8 84.3 0 31.6-10.4 60.7-27.8 84.3l20.4 15.3zm66.5 46c30-40.7 48-91 48-145.6s-18-104.9-48-145.6l-20.4 15.3c26.9 36.4 43 81.4 43 130.3 0 48.9-16.1 93.8-43 130.3l20.4 15.3z"/>\n                </symbol>\n                <symbol id="icon-file" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>\n                </symbol>\n                <symbol id="icon-folder" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2"></path>\n                </symbol>\n                <symbol id="icon-arrow-back-up" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M9 14l-4 -4l4 -4"></path>\n                    <path d="M5 10h11a4 4 0 1 1 0 8h-1"></path>\n                </symbol>\n                <symbol id="icon-files" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M15 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M18 17h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h4l5 5v7a2 2 0 0 1 -2 2z"></path>\n                    <path d="M16 17v2a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2"></path>\n                </symbol>\n                <symbol id="icon-upscale" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M7 11l5 -5l5 5"></path>\n                    <path d="M7 17l5 -5l5 5"></path>\n                </symbol>\n                <symbol id="icon-trash" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M4 7l16 0"></path>\n                    <path d="M10 11l0 6"></path>\n                    <path d="M14 11l0 6"></path>\n                    <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>\n                    <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>\n                </symbol>\n                <symbol id="icon-zoom-in" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path>\n                    <path d="M7 10l6 0"></path>\n                    <path d="M10 7l0 6"></path>\n                    <path d="M21 21l-6 -6"></path>\n                </symbol>\n                <symbol id="icon-zoom-out" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path>\n                    <path d="M7 10l6 0"></path>\n                    <path d="M21 21l-6 -6"></path>\n                </symbol>\n                <symbol id="icon-download" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path>\n                    <path d="M7 11l5 5l5 -5"></path>\n                    <path d="M12 4l0 12"></path>\n                </symbol>\n                <symbol id="icon-photo-plus" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M15 8h.01"></path>\n                    <path d="M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5"></path>\n                    <path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l4 4"></path>\n                    <path d="M14 14l1 -1c.67 -.644 1.45 -.824 2.182 -.54"></path>\n                    <path d="M16 19h6"></path>\n                    <path d="M19 16v6"></path>\n                </symbol>\n                <symbol id="icon-plus" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M12 5l0 14"></path>\n                    <path d="M5 12l14 0"></path>\n                </symbol>\n                <symbol id="icon-folder-plus" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5"></path>\n                    <path d="M16 19h6"></path>\n                    <path d="M19 16v6"></path>\n                </symbol>\n                <symbol id="icon-close" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M18 6l-12 12"></path>\n                    <path d="M6 6l12 12"></path>\n                </symbol>\n                <symbol id="icon-menu" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M4 6l16 0"></path>\n                    <path d="M4 12l16 0"></path>\n                    <path d="M4 18l16 0"></path>\n                </symbol>\n                <symbol id="icon-info" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>\n                    <path d="M12 9h.01"></path>\n                    <path d="M11 12h1v4h1"></path>\n                </symbol>\n                <symbol id="icon-refresh" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"></path>\n                    <path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"></path>\n                </symbol>\n                <symbol id="icon-edit" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4"></path>\n                    <path d="M13.5 6.5l4 4"></path>\n                </symbol>\n                <symbol id="icon-file-text" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>\n                    <path d="M9 9l1 0"></path>\n                    <path d="M9 13l6 0"></path>\n                    <path d="M9 17l6 0"></path>\n                </symbol>\n                <symbol id="icon-file-type-zip" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                    <path d="M16 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"></path>\n                    <path d="M12 15v6"></path>\n                    <path d="M5 15h3l-3 6h3"></path>\n                </symbol>\n                <symbol id="icon-file-type-pdf" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                    <path d="M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"></path>\n                    <path d="M17 18h2"></path>\n                    <path d="M20 15h-3v6"></path>\n                    <path d="M11 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z"></path>\n                </symbol>\n                <symbol id="icon-file-type-css" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                    <path d="M8 16.5a1.5 1.5 0 0 0 -3 0v3a1.5 1.5 0 0 0 3 0"></path>\n                    <path d="M11 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"></path>\n                    <path d="M17 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"></path>\n                </symbol>\n                <symbol id="icon-file-type-html" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                    <path d="M2 21v-6"></path>\n                    <path d="M5 15v6"></path>\n                    <path d="M2 18h3"></path>\n                    <path d="M20 15v6h2"></path>\n                    <path d="M13 21v-6l2 3l2 -3v6"></path>\n                    <path d="M7.5 15h3"></path>\n                    <path d="M9 15v6"></path>\n                </symbol>\n                <symbol id="icon-file-type-js" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M3 15h3v4.5a1.5 1.5 0 0 1 -3 0"></path>\n                    <path d="M9 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-1"></path>\n                </symbol>\n                <symbol id="icon-file-type-ppt" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"></path>\n                    <path d="M11 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"></path>\n                    <path d="M16.5 15h3"></path>\n                    <path d="M18 15v6"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                </symbol>\n                <symbol id="icon-file-type-doc" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                    <path d="M5 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z"></path>\n                    <path d="M20 16.5a1.5 1.5 0 0 0 -3 0v3a1.5 1.5 0 0 0 3 0"></path>\n                    <path d="M12.5 15a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1 -3 0v-3a1.5 1.5 0 0 1 1.5 -1.5z"></path>\n                </symbol>\n                <symbol id="icon-file-type-docx" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                    <path d="M2 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z"></path>\n                    <path d="M17 16.5a1.5 1.5 0 0 0 -3 0v3a1.5 1.5 0 0 0 3 0"></path>\n                    <path d="M9.5 15a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1 -3 0v-3a1.5 1.5 0 0 1 1.5 -1.5z"></path>\n                    <path d="M19.5 15l3 6"></path>\n                    <path d="M19.5 21l3 -6"></path>\n                </symbol>\n                <symbol id="icon-file-type-xls" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                    <path d="M4 15l4 6"></path>\n                    <path d="M4 21l4 -6"></path>\n                    <path d="M17 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"></path>\n                    <path d="M11 15v6h3"></path>\n                </symbol>\n                <symbol id="icon-file-type-svg" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                    <path d="M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"></path>\n                    <path d="M10 15l2 6l2 -6"></path>\n                    <path d="M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"></path>\n                </symbol>\n                <symbol id="icon-file-type-csv" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                    <path d="M7 16.5a1.5 1.5 0 0 0 -3 0v3a1.5 1.5 0 0 0 3 0"></path>\n                    <path d="M10 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"></path>\n                    <path d="M16 15l2 6l2 -6"></path>\n                </symbol>\n                <symbol id="icon-upload2" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1"></path>\n                    <path d="M9 15l3 -3l3 3"></path>\n                    <path d="M12 12l0 9"></path>\n                </symbol>\n                <symbol id="icon-upload" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path>\n                    <path d="M7 9l5 -5l5 5"></path>\n                    <path d="M12 4l0 12"></path>\n                </symbol>\n                <symbol id="icon-here" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M6 6h6a3 3 0 0 1 3 3v10l-4 -4m8 0l-4 4"></path>\n                </symbol>\n                <symbol id="icon-open" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"></path>\n                    <path d="M11 13l9 -9"></path>\n                    <path d="M15 4h5v5"></path>\n                </symbol>\n                <symbol id="icon-photo" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M15 8h.01"></path>\n                    <path d="M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z"></path>\n                    <path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5"></path>\n                    <path d="M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3"></path>\n                </symbol>\n                <symbol id="icon-file-type-jpg" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                    <path d="M11 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"></path>\n                    <path d="M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"></path>\n                    <path d="M5 15h3v4.5a1.5 1.5 0 0 1 -3 0"></path>\n                </symbol>\n                <symbol id="icon-file-type-png" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>\n                    <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path>\n                    <path d="M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"></path>\n                    <path d="M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"></path>\n                    <path d="M11 21v-6l3 6v-6"></path>\n                </symbol>\n                <symbol id="icon-file-type-gif" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M8 8h-2a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2v-4h-1"></path>\n                    <path d="M12 8v8"></path>\n                    <path d="M16 12h3"></path>\n                    <path d="M20 8h-4v8"></path>\n                </symbol>\n                <symbol id="icon-list" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M9 6l11 0"></path>\n                    <path d="M9 12l11 0"></path>\n                    <path d="M9 18l11 0"></path>\n                    <path d="M5 6l0 .01"></path>\n                    <path d="M5 12l0 .01"></path>\n                    <path d="M5 18l0 .01"></path>\n                </symbol>\n                <symbol id="icon-icons" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M4 4h6v6h-6z"></path>\n                    <path d="M14 4h6v6h-6z"></path>\n                    <path d="M4 14h6v6h-6z"></path>\n                    <path d="M14 14h6v6h-6z"></path>\n                </symbol>\n                <symbol id="icon-thumbnails2" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M15 6l.01 0"></path>\n                    <path d="M3 3m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z"></path>\n                    <path d="M3 13l4 -4a3 5 0 0 1 3 0l4 4"></path>\n                    <path d="M13 12l2 -2a3 5 0 0 1 3 0l3 3"></path>\n                    <path d="M8 21l.01 0"></path>\n                    <path d="M12 21l.01 0"></path>\n                    <path d="M16 21l.01 0"></path>\n                </symbol>\n                <symbol id="icon-thumbnails" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M15 8h.01"></path>\n                    <path d="M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z"></path>\n                    <path d="M3.5 15.5l4.5 -4.5c.928 -.893 2.072 -.893 3 0l5 5"></path>\n                    <path d="M14 14l1 -1c.928 -.893 2.072 -.893 3 0l2.5 2.5"></path>\n                </symbol>\n                <symbol id="icon-dots-vertical" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>\n                    <path d="M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>\n                    <path d="M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>\n                </symbol>\n                <symbol id="icon-settings" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"></path>\n                    <path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path>\n                </symbol>\n                <symbol id="icon-close-right" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                    <path d="M7 7l5 5l-5 5"></path>\n                    <path d="M13 7l5 5l-5 5"></path>\n                </symbol>\n            </defs>\n        </svg>`;this.element=e,e.insertAdjacentHTML("afterbegin",o),this.textToImageUrl||(this.filesOnly=!0),this.panelReverse&&this.reversePanel(),this.filesOnly&&this.panelFilesOnly(),this.folderTree&&this.panelShowTree();const i=document.querySelector(".pop-movefiles"),l=document.querySelector(".pop-rename"),s=document.querySelector(".pop-folder"),a=document.querySelector(".pop-settings"),r=document.querySelector(".panel-files"),d=document.querySelector(".modal-textedit"),c=document.querySelector(".file-list"),h=document.querySelector(".file-info"),p=document.querySelectorAll(".tab-button"),u=document.querySelectorAll(".tab-content");p.forEach(((e,t)=>{const n=`tabContent${t+1}`;e.setAttribute("aria-controls",n),u[t].setAttribute("id",n),e.addEventListener("click",(()=>{p.forEach((e=>e.classList.remove("active"))),u.forEach((e=>e.classList.remove("active"))),e.classList.contains("tab-tree")&&localStorage.setItem("_active_tab","tree"),e.classList.contains("tab-generate-image")&&localStorage.setItem("_active_tab","generate-image"),e.classList.add("active"),u[t].classList.add("active")}))}));const m=localStorage.getItem("_active_tab");if(m){if(p.forEach((e=>e.classList.remove("active"))),u.forEach((e=>e.classList.remove("active"))),"tree"===m){const e=document.querySelector(".tab-tree"),t=document.querySelector(".tab-content-tree");e.classList.add("active"),t.classList.add("active")}if("generate-image"===m){const e=document.querySelector(".tab-generate-image"),t=document.querySelector(".tab-content-generate-image");e.classList.add("active"),t.classList.add("active")}}this.prefix="";const v=localStorage.getItem("_folder_path");v?this.fetchFolderContents(v):this.fetchFolderContents(""),this.getModels();document.querySelector(".btn-toggle-select").addEventListener("click",(()=>{this.toggleSelection()}));document.querySelector(".btn-delete-files").addEventListener("click",(()=>{this.deleteSelected()}));const g=document.querySelector(".btn-move-files");g.addEventListener("click",(()=>{this.showPop(i,(()=>{}),g)}));document.querySelector(".btn-filemore").addEventListener("click",(()=>{document.querySelector(".file-info").classList.contains("active")?this.hidePanelInfo():this.showPanelInfo()})),localStorage.getItem("_show_panelinfo")&&"y"===localStorage.getItem("_show_panelinfo")&&this.initialFileInfo();h.querySelector(".btn-close").addEventListener("click",(()=>{this.hidePanelInfo()}));h.querySelector(".btn-edit").addEventListener("click",(()=>{this.enableBuilder&&window._page.fileName?this.viewBuilder():this.viewText(this.selectedItem.url)}));h.querySelector(".btn-view").addEventListener("click",(()=>{this.viewMedia(this.selectedItem.url)}));h.querySelector(".btn-open").addEventListener("click",(()=>{const e=this.selectedItem.url,t=document.createElement("a");t.href=e,t.target="_blank",t.click()}));h.querySelector(".btn-download").addEventListener("click",(()=>{const e=this.selectedItem.url,t=this.selectedItem.fileName,n=document.createElement("a");n.href=e,n.download=t,n.click()}));h.querySelector(".btn-upscale").addEventListener("click",(()=>{var e=new Image;e.onload=()=>{let t=e.naturalWidth,n=e.naturalHeight;const o=this.selectedItem.url;this.upscaleImage(o,t,n)},e.src=this.selectedItem.url}));h.querySelector(".btn-control-image").addEventListener("click",(()=>{document.querySelector(".div-img-control").style.display="block";document.querySelector(".div-img-control-preview").innerHTML=`<img src="${this.selectedItem.url}" style="object-fit:contain" />`,localStorage.setItem("_img_imagecontrol",this.selectedItem.url)}));const f=()=>{const e=a.querySelector(".gallery-settings"),t=localStorage.getItem("_view");t?"list"===t||"icons"===t?e.style.display="none":"gallery"===t&&(e.style.display="flex"):e.style.display="flex"},y=document.querySelector(".btn-settings");y.addEventListener("click",(()=>{this.showPop(a,(()=>{}),y),f()}));document.querySelector(".btn-view-list").addEventListener("click",(()=>{this.renderListView(),this.prepareItemsNavigation(),f()}));document.querySelector(".btn-view-icons").addEventListener("click",(()=>{this.renderObjects(!0),this.prepareItemsNavigation(),f()}));document.querySelector(".btn-view-thumbnails").addEventListener("click",(()=>{this.renderObjects(),this.prepareItemsNavigation(),f()}));const b=localStorage.getItem("_gallery_view");b&&("xs"===b&&(c.classList.remove("sm"),c.classList.remove("lg"),c.classList.remove("xl"),c.classList.add("xs")),"sm"===b&&(c.classList.remove("xs"),c.classList.remove("lg"),c.classList.remove("xl"),c.classList.add("sm")),"m"===b&&(c.classList.remove("sm"),c.classList.remove("xs"),c.classList.remove("xl"),c.classList.remove("lg")),"lg"===b&&(c.classList.remove("sm"),c.classList.remove("xs"),c.classList.remove("xl"),c.classList.add("lg")),"xl"===b&&(c.classList.remove("sm"),c.classList.remove("xs"),c.classList.remove("lg"),c.classList.add("xl")));a.querySelector(".btn-gallery-xs").addEventListener("click",(()=>{localStorage.setItem("_gallery_view","xs"),c.classList.remove("sm"),c.classList.remove("lg"),c.classList.remove("xl"),c.classList.add("xs"),setTimeout((()=>{this.prepareItemsNavigation()}),330)}));a.querySelector(".btn-gallery-sm").addEventListener("click",(()=>{localStorage.setItem("_gallery_view","sm"),c.classList.remove("xs"),c.classList.remove("lg"),c.classList.remove("xl"),c.classList.add("sm"),setTimeout((()=>{this.prepareItemsNavigation()}),330)}));a.querySelector(".btn-gallery-m").addEventListener("click",(()=>{localStorage.setItem("_gallery_view","m"),c.classList.remove("sm"),c.classList.remove("xs"),c.classList.remove("xl"),c.classList.remove("lg"),setTimeout((()=>{this.prepareItemsNavigation()}),330)}));a.querySelector(".btn-gallery-lg").addEventListener("click",(()=>{localStorage.setItem("_gallery_view","lg"),c.classList.remove("sm"),c.classList.remove("xs"),c.classList.remove("xl"),c.classList.add("lg"),setTimeout((()=>{this.prepareItemsNavigation()}),330)}));a.querySelector(".btn-gallery-xl").addEventListener("click",(()=>{localStorage.setItem("_gallery_view","xl"),c.classList.remove("sm"),c.classList.remove("xs"),c.classList.remove("lg"),c.classList.add("xl"),setTimeout((()=>{this.prepareItemsNavigation()}),330)}));const x=document.querySelector(".inp-folder-name");x.addEventListener("keydown",(e=>{"Enter"===e.key&&this.createFolder()})),window.addEventListener("resize",(()=>{this.prepareItemsNavigation()}));const w=document.querySelector(".chk-filesize"),k=localStorage.getItem("_show_filesize");k&&"y"===k?(w.checked=!0,c.classList.add("fs")):(w.checked=!1,c.classList.remove("fs")),w.addEventListener("click",(()=>{w.checked?(localStorage.setItem("_show_filesize","y"),c.classList.add("fs")):(localStorage.setItem("_show_filesize","n"),c.classList.remove("fs")),setTimeout((()=>{this.prepareItemsNavigation()}),330)}));const S=document.querySelector(".chk-modifieddate"),M=localStorage.getItem("_show_modifieddate");M&&"y"===M?(S.checked=!0,c.classList.add("md")):(S.checked=!1,c.classList.remove("md")),S.addEventListener("click",(()=>{S.checked?(localStorage.setItem("_show_modifieddate","y"),c.classList.add("md")):(localStorage.setItem("_show_modifieddate","n"),c.classList.remove("md")),setTimeout((()=>{this.prepareItemsNavigation()}),330)}));const L=document.querySelector(".btn-refresh");L&&L.addEventListener("click",(()=>{this.fetchFolderContents("");document.querySelector(".inp-url").value=""}));const q=document.querySelector(".btn-folder");q.addEventListener("click",(()=>{this.showPop(s,(()=>{}),q),x.focus()}));document.querySelector(".inp-rename-to").addEventListener("keydown",(e=>{if("Enter"===e.key)return void this.rename();const t=this.validFileNamePattern,n=e.key;t.test(n)||"Backspace"===n||"Delete"===n||e.preventDefault()}));const I=document.querySelector(".btn-rename");I.addEventListener("click",(()=>{const e=document.querySelector(".inp-rename-to");let t;t=this.isToggleOn&&this.selectedItems.length>0?this.selectedItems[0]:this.singleSelectedItem,e.value=t,this.showPop(l,(()=>{}),I),e.focus()}));document.querySelector(".btn-rename-to").addEventListener("click",(()=>{this.rename()}));document.querySelector(".btn-create-folder").addEventListener("click",(()=>{this.demoMode?alert(this.out("This function is disabled in this demo.")):this.createFolder()}));r.querySelector(".btn-cancel").addEventListener("click",(e=>{this.onCancel(e),e.preventDefault()}));document.querySelector(".btn-select").addEventListener("click",(e=>{const t=document.querySelector(".inp-url");""!==t.value?(this.onSelect(t.value,e),e.preventDefault()):alert(this.out("Please select a file"))}));document.querySelector(".btn-generate").addEventListener("click",(e=>{const t=document.querySelector(".inp-prompt"),n=document.querySelector(".inp-neg-prompt");""!==t.value&&(this.generateImage(t.value,n.value),e.preventDefault())}));const E=e=>{const t=document.querySelector(".div-neg-prompt"),n=document.querySelector(".div-advance"),o=document.querySelector(".inp-width"),i=document.querySelector(".inp-height"),l=document.querySelector(".val-width"),s=document.querySelector(".val-height");if("flux-schnell"===e)t.style.display="none",n.style.display="none",o.setAttribute("max",1280),i.setAttribute("max",1280);else{t.style.display="",n.style.display="",o.setAttribute("max",1024),i.setAttribute("max",1024);let e=localStorage.getItem("_img_width"),a=localStorage.getItem("_img_height");e&&parseInt(e)>1024&&(o.value=1024,l.innerHTML=1024,localStorage.setItem("_img_width",1024)),a&&parseInt(a)>1024&&(i.value=1024,s.innerHTML=1024,localStorage.setItem("_img_height",1024))}},C=document.querySelector(".inp-model");localStorage.getItem("_img_model")&&(C.value=localStorage.getItem("_img_model")),C.onchange=()=>{let e=C.value;localStorage.setItem("_img_model",e),E(e)},E(C.value);const _=document.querySelector(".val-width"),T=document.querySelector(".inp-width");if(localStorage.getItem("_img_width")){let e=localStorage.getItem("_img_width");T.value=e,_.innerHTML=e}T.oninput=()=>{let e=T.value;_.innerHTML=e},T.onchange=()=>{let e=T.value;localStorage.setItem("_img_width",e)};const H=document.querySelector(".val-height"),A=document.querySelector(".inp-height");if(localStorage.getItem("_img_height")){let e=localStorage.getItem("_img_height");A.value=e,H.innerHTML=e}A.oninput=()=>{let e=A.value;H.innerHTML=e},A.onchange=()=>{let e=A.value;localStorage.setItem("_img_height",e)};const j=document.querySelector(".val-steps"),$=document.querySelector(".inp-steps");if(localStorage.getItem("_img_steps")){let e=localStorage.getItem("_img_steps");$.value=e,j.innerHTML=e}$.oninput=()=>{let e=$.value;j.innerHTML=e},$.onchange=()=>{let e=$.value;localStorage.setItem("_img_steps",e)};const z=document.querySelector(".val-guidance"),P=document.querySelector(".inp-guidance");if(localStorage.getItem("_img_guidance")){let e=localStorage.getItem("_img_guidance");P.value=e,z.innerHTML=e}P.oninput=()=>{let e=P.value;z.innerHTML=e},P.onchange=()=>{let e=P.value;localStorage.setItem("_img_guidance",e)};const N=document.querySelector(".inp-sampler");localStorage.getItem("_img_sampler")&&(N.value=localStorage.getItem("_img_sampler")),N.onchange=()=>{let e=N.value;localStorage.setItem("_img_sampler",e)};const B=document.querySelector(".inp-prompt");localStorage.getItem("_img_prompt")&&(B.value=localStorage.getItem("_img_prompt")),B.onkeyup=()=>{let e=B.value;localStorage.setItem("_img_prompt",e)};const D=document.querySelector(".inp-neg-prompt");localStorage.getItem("_img_neg_prompt")&&(D.value=localStorage.getItem("_img_neg_prompt")),D.onkeyup=()=>{let e=D.value;localStorage.setItem("_img_neg_prompt",e)};const F=document.querySelector(".inp-controlnet");if(localStorage.getItem("_img_controlnet")&&(F.value=localStorage.getItem("_img_controlnet")),F.onchange=()=>{let e=F.value;localStorage.setItem("_img_controlnet",e)},localStorage.getItem("_img_imagecontrol")){document.querySelector(".div-img-control").style.display="block";document.querySelector(".div-img-control-preview").innerHTML=`<img src="${localStorage.getItem("_img_imagecontrol")}" style="object-fit:contain" />`}const O=document.querySelector(".btn-clear-control-image");O&&O.addEventListener("click",(()=>{document.querySelector(".div-img-control").style.display="";document.querySelector(".div-img-control-preview").innerHTML="",localStorage.setItem("_img_imagecontrol","")}));const U=localStorage.getItem("_prompt_history");this.promptHistory=U?JSON.parse(U):[];document.querySelector(".link-history").addEventListener("click",(()=>{this.viewPrompts()}));const V=d.querySelector("textarea");V.addEventListener("keydown",(e=>{if("Tab"===e.key){e.preventDefault();const t=V.selectionStart,n=V.selectionEnd,o="\t";V.value=V.value.substring(0,t)+o+V.value.substring(n),V.selectionStart=V.selectionEnd=t+o.length}}));const R=d.querySelector(".btn-save-file");R.addEventListener("click",(async()=>{const e=Date.now();R.innerHTML=`\n            <svg class="spinner" width="14px" height="14px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">\n                <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>\n            </svg>\n            <span style="margin-left:10px">${this.out("Save")}</span>\n            `;const t={fileName:this.selectedItem.fileName,text:d.querySelector("textarea").value,folderPath:this.folderPath};let n={...this.headers,...this.defaultHeaders};const o=await fetch(this.settings.saveTextUrl,{method:"POST",body:JSON.stringify(t),headers:n}),i=await o.json(),l=Date.now()-e;l<300&&await new Promise((e=>setTimeout(e,350-l))),R.innerHTML=`\n            ${this.out("Save")}\n            `,i.error&&alert(this.out("Failed to save the file."))}));const K=document.querySelector(".btn-upload"),J=document.querySelector(".inp-files");K.addEventListener("click",(()=>{J.click()})),J.addEventListener("change",(e=>{const t=e.target.files;t.length>0&&this.uploadFiles(t)})),c.addEventListener("click",(e=>{if(!this.isToggleOn){if(document.querySelector(".is-pop.active"))return void this.focusBack();if(e.target.closest("li"))return;const t=c.querySelector(".selected");t&&t.classList.remove("selected"),this.selectedFolder=null,this.singleSelectedItem=null,this.showHideButtons()}}));c.addEventListener("keydown",(e=>{const t=c.querySelectorAll("li");if(-1===this.currentIndex)return;const n=e=>{e.getAttribute("data-url")?this.isToggleOn||(this.selectedItem={url:e.getAttribute("data-url"),fileName:e.querySelector("[data-name]").getAttribute("data-name"),fileSize:e.querySelector("[data-size]").getAttribute("data-size"),modified:e.querySelector("[data-modified]").getAttribute("data-modified"),created:e.querySelector("[data-created]").getAttribute("data-created")},this.selectFile(e)):this.selectFolder(e)};let o;if(!t[this.currentIndex].querySelector("input"))if("row"===this.flexDirection)switch(e.key){case"ArrowUp":this.currentIndex>=this.numCols&&(o=t[this.currentIndex-this.numCols],n(o),o.focus());break;case"ArrowDown":this.currentIndex<t.length-this.numCols&&(o=t[this.currentIndex+this.numCols],n(o),o.focus());break;case"ArrowLeft":this.currentIndex%this.numCols!=0&&(o=t[this.currentIndex-1],n(o),o.focus());break;case"ArrowRight":(this.currentIndex+1)%this.numCols!=0&&this.currentIndex<t.length-1&&(o=t[this.currentIndex+1],n(o),o.focus());break;case"Tab":if(e.shiftKey){e.preventDefault();o=t[this.currentIndex>0?this.currentIndex-1:t.length-1],n(o),o.focus()}else{e.preventDefault();o=t[this.currentIndex<t.length-1?this.currentIndex+1:0],n(o),o.focus()}break;case" ":case"Enter":this.singleSelectedItem?this.viewMedia(this.selectedItem.url):(o=t[this.currentIndex],o.click())}else switch(e.key){case"ArrowLeft":this.currentIndex>=this.numRows&&(o=t[this.currentIndex-this.numRows],n(o),o.focus());break;case"ArrowRight":this.currentIndex<t.length-this.numRows&&(o=t[this.currentIndex+this.numRows],n(o),o.focus());break;case"ArrowUp":this.currentIndex%this.numRows!=0&&(o=t[this.currentIndex-1],n(o),o.focus());break;case"ArrowDown":(this.currentIndex+1)%this.numRows!=0&&this.currentIndex<t.length-1&&(o=t[this.currentIndex+1],n(o),o.focus());break;case"Tab":if(e.shiftKey){e.preventDefault();o=t[this.currentIndex>0?this.currentIndex-1:t.length-1],n(o),o.focus()}else{e.preventDefault();o=t[this.currentIndex<t.length-1?this.currentIndex+1:0],n(o),o.focus()}break;case" ":case"Enter":this.singleSelectedItem?this.viewMedia(this.selectedItem.url):(o=t[this.currentIndex],o.click())}}));if(document.querySelectorAll(".tooltip").forEach((e=>{e.getAttribute("title")&&(e.setAttribute("data-title",e.getAttribute("title")),e.removeAttribute("title"))})),this.initializeDropZone(),this.settings.filePicker){document.querySelector(".panel-files").classList.add("picker")}this.isToggleOn=!1,this.selectedItems=[],window.fileManager=this,frameElement&&!parent._cb&&(this.panelFullScreen=!0)}initialFileInfo(){const e=document.querySelector(".file-info");e.classList.add("active"),e.setAttribute("aria-hidden",!1);const t=e.querySelector(".file-info-details"),n=e.querySelector(".no-selection-info");t.style.display="none",n.style.display="",n.innerHTML=this.out("No selected file.")}showPanelInfo(){localStorage.setItem("_show_panelinfo","y");const e=document.querySelector(".file-info");e.classList.add("active"),e.setAttribute("aria-hidden",!1),this.renderFileInfo();const t=e.querySelector(".file-info-details"),n=e.querySelector(".no-selection-info");t.style.display="",n.style.display="none",setTimeout((()=>{this.prepareItemsNavigation(),this.focusBack()}),400)}focusBack(){const e=document.querySelector(".file-list").querySelector(".selected");e&&e.focus()}hidePanelInfo(){localStorage.setItem("_show_panelinfo","n");const e=document.querySelector(".file-info");e.classList.remove("active"),e.setAttribute("aria-hidden",!0),setTimeout((()=>{this.prepareItemsNavigation(),this.focusBack()}),400)}getScrollbarWidth(){const e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}prepareItemsNavigation(){const e=document.querySelector(".file-list");let t=0;if(e.scrollHeight>e.clientHeight&&(t=this.getScrollbarWidth()),"row"===this.flexDirection){const n=Number(window.getComputedStyle(e).getPropertyValue("padding-left").match(/\d+/)[0]),o=Number(window.getComputedStyle(e).getPropertyValue("padding-right").match(/\d+/)[0]),i=e.offsetWidth-(n+o+t),l=e.querySelectorAll("li");if(0===l.length)return this.currentIndex=-1,void(this.numCols=0);let s=l[0].offsetWidth;s+=Number(window.getComputedStyle(l[0]).getPropertyValue("margin-right").match(/\d+/)[0]),this.currentIndex=-1,this.numCols=Math.floor(i/s),l.forEach(((e,t)=>{e.tabIndex=0,e.addEventListener("focus",(()=>{this.currentIndex=t}))}))}else{const t=Number(window.getComputedStyle(e).getPropertyValue("padding-top").match(/\d+/)[0]),n=Number(window.getComputedStyle(e).getPropertyValue("padding-bottom").match(/\d+/)[0]),o=e.clientHeight-(t+n),i=e.querySelectorAll("li");if(0===i.length)return this.currentIndex=-1,void(this.numCols=0);let l=i[0].offsetHeight;l+=Number(window.getComputedStyle(i[0]).getPropertyValue("margin-bottom").match(/\d+/)[0]),this.currentIndex=-1,this.numRows=Math.floor(o/l),i.forEach(((e,t)=>{e.tabIndex=0,e.addEventListener("focus",(()=>{this.currentIndex=t}))}))}e.focus()}calculateRowsCols(){const e=document.querySelector(".file-list");if("row"===this.flexDirection){const t=Number(window.getComputedStyle(e).getPropertyValue("padding-left").match(/\d+/)[0]),n=Number(window.getComputedStyle(e).getPropertyValue("padding-right").match(/\d+/)[0]),o=e.clientWidth-(t+n),i=e.querySelectorAll("li");let l=i[0].offsetWidth;l+=Number(window.getComputedStyle(i[0]).getPropertyValue("margin-right").match(/\d+/)[0]),this.numCols=Math.floor(o/l)}else{const t=Number(window.getComputedStyle(e).getPropertyValue("padding-top").match(/\d+/)[0]),n=Number(window.getComputedStyle(e).getPropertyValue("padding-bottom").match(/\d+/)[0]),o=e.clientHeight-(t+n),i=e.querySelectorAll("li");let l=i[0].offsetHeight;l+=Number(window.getComputedStyle(i[0]).getPropertyValue("margin-bottom").match(/\d+/)[0]),this.numRows=Math.floor(o/l)}}reset(){localStorage.removeItem("_img_model"),localStorage.removeItem("_img_width"),localStorage.removeItem("_img_height"),localStorage.removeItem("_img_steps"),localStorage.removeItem("_img_guidance"),localStorage.removeItem("_img_sampler"),localStorage.removeItem("_img_prompt"),localStorage.removeItem("_img_neg_prompt"),localStorage.removeItem("_img_controlnet"),localStorage.removeItem("_img_imagecontrol"),localStorage.removeItem("_prompt_history")}setUrl(e){document.querySelector(".inp-url").value=e;document.querySelectorAll(".file-list li").forEach((e=>{e.classList.remove("selected")}))}startProcess(){const e=document.querySelector(".modal-overlay");e&&(e.style.display="flex")}finishProcess(){const e=document.querySelector(".modal-overlay");e&&(e.style.display="")}abort(){this.controller&&this.controller.abort(),this.finishProcess()}async getModels(){const e=document.querySelector(".inp-model");e.querySelectorAll("option").forEach((e=>{e.hasAttribute("disabled")||(e.innerHTML=`&nbsp;&nbsp;${e.innerHTML}`)})),localStorage.getItem("_img_model")?e.value=localStorage.getItem("_img_model"):e.value="realistic-vision-v3"}reversePanel(){const e=document.querySelector(".panel");if(e.classList.contains("reverse")){e.classList.remove("reverse");const t=e.querySelector(".panel-files"),n=e.querySelector(".panel-side");e.insertBefore(n,t)}else{e.classList.add("reverse");const t=e.querySelector(".panel-side"),n=e.querySelector(".panel-files");e.insertBefore(n,t)}}panelFilesOnly(){const e=document.querySelector(".panel");e.classList.contains("filesonly")?e.classList.remove("filesonly"):e.classList.add("filesonly")}panelShowTree(){const e=document.querySelector(".panel");e.classList.contains("tree")?e.classList.remove("tree"):e.classList.add("tree")}hidePanel(e){e.classList.remove("active"),e.setAttribute("aria-hidden",!0),e.removeEventListener("keydown",this.handlePanelKeyDown),document.removeEventListener("click",this.handlePanelClickOut),this.focusBack()}showPop(e,t,n){if(e.classList.contains("active"))return;let o=document.querySelectorAll(".is-pop.active");Array.prototype.forEach.call(o,(t=>{t!==e&&this.hidePop(t)})),e.classList.add("active"),e.setAttribute("aria-hidden",!1),n.classList.add("active");let i=n.getBoundingClientRect().top+window.scrollY,l=n.getBoundingClientRect().left+window.scrollX;e.style.top=9+i+n.offsetHeight+"px",e.style.left=l-(e.offsetWidth-n.offsetWidth)+"px",e.tabIndex=0,e.focus({preventScroll:!0}),this.handlePopClickOut=o=>{e.contains(o.target)||n.contains(o.target)||(this.hidePop(e),t&&t())},this.handlePopKeyDown=n=>{27===n.keyCode&&(this.hidePop(e),t&&t())},e.addEventListener("keydown",this.handlePopKeyDown),document.addEventListener("click",this.handlePopClickOut)}hidePop(e){e.classList.remove("active"),e.setAttribute("aria-hidden",!0),e.removeEventListener("keydown",this.handlePopKeyDown),document.removeEventListener("click",this.handlePopClickOut),this.focusBack()}async getFolders(e){let t;if(e)t=e;else{let e={...this.headers,...this.defaultHeaders};const n=await fetch(this.listFoldersUrl,{method:"GET",headers:e});t=(await n.json()).folders}const n=document.querySelector(".div-folders");n.innerHTML="";let o=document.createElement("ul");n.appendChild(o);let i=document.createElement("li");i.innerHTML=`<button><svg><use xlink:href="#icon-folder"></use></svg> <span>${this.out("Home")}</span></button>`,o.appendChild(i);let l=i.querySelector("button");l.addEventListener("click",(()=>{this.moveSelected("")})),this.createTreeView_Move(t,i);const s=document.querySelector(".div-tree");s.innerHTML="",o=document.createElement("ul"),s.appendChild(o),i=document.createElement("li"),i.innerHTML=`<button data-path=""${""===this.folderPath?' class="active"':""}><svg><use xlink:href="#icon-folder"></use></svg> <span>${this.out("Home")}</span></button>`,o.appendChild(i),l=i.querySelector("button"),l.addEventListener("click",(()=>{this.fetchFolderContents("")})),this.createTreeView_Main(t,i,!0)}createTreeView_Move(e,t){const n=document.createElement("ul");t.appendChild(n),e.forEach((e=>{const t=document.createElement("li");t.innerHTML=`<button><svg><use xlink:href="#icon-folder"></use></svg> <span>${e.name}</span></button>`,n.appendChild(t),e.subfolders.length>0&&this.createTreeView_Move(e.subfolders,t);t.querySelector("button").addEventListener("click",(()=>{this.moveSelected(e.path)}))}))}createTreeView_Main(e,t,n){const o=document.createElement("ul");t.appendChild(o),e.forEach((e=>{n&&e.path.includes("/")&&(this.prefix=e.path.split("/")[0]);const t=document.createElement("li");let i=!1;this.prefix?e.path===this.prefix+"/"+this.folderPath&&(i=!0):e.path===this.folderPath&&(i=!0),t.innerHTML=`<button data-path="${e.path}"${i?' class="active"':""}><svg><use xlink:href="#icon-folder"></use></svg> <span>${e.name}</span></button>`,o.appendChild(t),e.subfolders.length>0&&this.createTreeView_Main(e.subfolders,t);t.querySelector("button").addEventListener("click",(()=>{let t=this.prefix?e.path.substring(this.prefix.length+1):e.path;this.fetchFolderContents(t)}))}))}renderHistory(){let e=document.querySelector(".modal-prompts");frameElement&&!this.panelFullScreen&&(e=parent.document.querySelector(".modal-prompts"));const t=e.querySelector(".modal-content"),n=e.querySelector(".prompt-list");let o="",i=0;this.promptHistory.forEach((e=>{o=`<div class="item-prompt" tabIndex="0" role="button">\n                <button class="item-prompt-remove" data-index="${i}">\n                    <svg><use xlink:href="#icon-trash"></use></svg>\n                </button>\n                <span>${e}</span>\n            </div>`+o,i++})),n.innerHTML=o;t.querySelectorAll(".item-prompt-remove").forEach((e=>{e.addEventListener("click",(t=>{const n=e.getAttribute("data-index");this.promptHistory.splice(n,1),localStorage.setItem("_prompt_history",JSON.stringify(this.promptHistory)),this.renderHistory(),t.preventDefault(),t.stopImmediatePropagation()}))}));const l=document.querySelector(".link-history"),s=()=>{if(e.classList.remove("flex"),document.removeEventListener("keydown",this.handleKeyDown),e.removeEventListener("click",this.closeView),frameElement){parent.document.removeEventListener("keydown",this.handleKeyDown);let e=parent.document.querySelector(".modal-prompts");e&&e.parentNode.removeChild(e),l.focus(),l.blur()}};t.querySelectorAll(".item-prompt").forEach((e=>{e.addEventListener("click",(()=>{const t=e.querySelector("span").innerText;document.querySelector("#inpPrompt").value=t,localStorage.setItem("_img_prompt",t),s()}))}))}viewPrompts(){let e=document.querySelector(".modal-prompts");if(frameElement&&!this.panelFullScreen){let t=`\n            <div class="is-modal modal-prompts">\n            <style>\n                .modal-prompts {\n                    display: none;\n                    background: transparent;\n                    z-index: 10006;\n                    top:0;left:0;\n                    position:fixed;\n                    width:100vw;\n                    height:100vh;\n                    justify-content: center;\n                    align-items: center;\n                }\n                .modal-prompts.flex {\n                    display: flex;\n                }\n                .prompt-list {\n                    width: 100%;\n                    height: 100%;\n                    display: flex;\n                    justify-content: center;\n                    align-items:center;\n                    flex-flow: row wrap;\n                    padding: 30px;\n                    box-sizing: border-box;\n                    overflow: auto;\n                }\n                .item-prompt {\n                    margin-right: 30px;\n                    margin-bottom: 30px;\n                    position: relative;\n                    display: flex;\n                    flex: none;\n                    width: 350px;\n                    height: auto;\n                    flex-direction: column;\n                    justify-content: space-between;\n                    border-radius: 0.25rem;\n                    border: 1px solid rgb(156 163 175/.75);\n                    padding: 1.5rem 2rem;\n                    box-sizing: border-box;\n                    letter-spacing: .025em;\n                    box-shadow: 5px 5px 0px rgb(0 0 0 / 3%);\n                    font-size: 17px;\n                    font-weight: 300;\n                    font-family: sans-serif;\n                    line-height: 1.3;\n                    cursor: pointer;\n                    transition: all 0.3s ease;\n                    outline: transparent 2px solid;\n                    outline-offset: 2px;\n                \n                }\n                .dark .item-prompt {\n                    border: 1px solid rgb(156 163 175/.4);\n                }\n                .item-prompt:focus-visible {\n                    outline: #3e93f7 2px solid;\n                    outline-offset: 2px;\n                }\n                .item-prompt:hover {\n                    background: rgba(0, 0, 0, 0.03);\n                }\n                .item-prompt-remove {\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    width:40px;\n                    height: 40px;\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    background: transparent !important;\n                    cursor: pointer;\n                }\n                .item-prompt-remove svg { \n                    width: 19px; \n                    height: 19px; \n                    ${parent._cb?`\n                    color: ${parent._cb.styleModalColor};    \n                    fill: ${parent._cb.styleModalColor};  \n                    `:""}  \n                }\n\n                .btn-close {\n                    position: absolute;\n                    top: 10px;\n                    right: 10px;\n                    width: 40px;\n                    height: 40px;\n                    background: transparent;\n                    cursor: pointer;\n                    color: ${parent._cb.styleButtonClassicColor};\n                }\n                .btn-close svg {\n                    width:30px;\n                    height:30px;\n                    flex:none;\n                }\n\n                .dark .modal-prompts * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(255, 255, 255, 0.3) auto;\n                }\n                .dark .modal-prompts *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .dark .modal-prompts *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .dark .modal-prompts *::-webkit-scrollbar-thumb {\n                    background-color:rgba(255, 255, 255, 0.3);\n                } \n\n                .colored-dark .modal-prompts * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgb(100, 100, 100) auto;\n                }\n                .colored-dark .modal-prompts *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .colored-dark .modal-prompts *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .colored-dark .modal-prompts *::-webkit-scrollbar-thumb {\n                    background-color:rgb(100, 100, 100);\n                } \n        \n                .colored .modal-prompts * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                }\n                .colored .modal-prompts *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .colored .modal-prompts *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .colored .modal-prompts *::-webkit-scrollbar-thumb {\n                    background-color: rgba(0, 0, 0, 0.4);\n                } \n        \n                .light .modal-prompts * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                }\n                .light .modal-prompts *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .light .modal-prompts *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .light .modal-prompts *::-webkit-scrollbar-thumb {\n                    background-color: rgba(0, 0, 0, 0.4);\n                } \n            </style>\n            <svg width="0" height="0" style="position:absolute;display:none;">\n                <defs>\n                    <symbol id="icon-close" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                        <path d="M18 6l-12 12"></path>\n                        <path d="M6 6l12 12"></path>\n                    </symbol>\n                    <symbol id="icon-trash" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                        <path d="M4 7l16 0"></path>\n                        <path d="M10 11l0 6"></path>\n                        <path d="M14 11l0 6"></path>\n                        <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>\n                        <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>\n                    </symbol>\n                </defs>\n            </svg>\n            <div class="is-modal-content modal-content" style="\n                display: flex;\n                align-items: flex-start;\n                justify-content: flex-start;\n                flex-flow: row wrap;\n                padding: 0;\n                width: 70%;\n                height: 70%;\n                box-shadow: 0px 10px 30px 0px rgba(95, 95, 95, 0.19);\n                border-radius: 5px;\n                ${parent._cb?`\n                background: ${parent._cb.styleModalBackground};\n                color: ${parent._cb.styleModalColor};\n                `:"\n                background: rgb(255 255 255 / 100%);\n                "}\n                position: relative;">\n\n                <button class="btn-close">\n                    <svg><use xlink:href="#icon-close"></use></svg>\n                </button>\n\n                <div class="prompt-list">\n                  \n                </div>\n            </div>\n            </div>\n            `,n=parent.document.querySelector(".modal-prompts");n&&n.parentNode.removeChild(n),parent.document.body.insertAdjacentHTML("beforeend",t),e=parent.document.querySelector(".modal-prompts")}const t=document.querySelector(".link-history"),n=e.querySelector(".btn-close"),o=()=>{if(e.classList.remove("flex"),document.removeEventListener("keydown",this.handleKeyDown),e.removeEventListener("click",this.closeView),frameElement){parent.document.removeEventListener("keydown",this.handleKeyDown);let e=parent.document.querySelector(".modal-prompts");e&&e.parentNode.removeChild(e),t.focus(),t.blur()}};this.closeView=e=>{let t=e.target;t&&t.classList.contains("modal-prompts")&&o(),e.preventDefault(),e.stopImmediatePropagation()},n&&n.addEventListener("click",(()=>{o()})),this.renderHistory(),e.classList.add("flex"),this.handleKeyDown=e=>{let t=e.target;t&&t.blur(),"Escape"===e.key&&o()},document.addEventListener("keydown",this.handleKeyDown),frameElement&&parent.document.addEventListener("keydown",this.handleKeyDown),e.addEventListener("click",this.closeView)}async getContent(e){const t=Date.now(),n=await fetch(e+`?t=${t}`),o=await n.text();this.workingPageHtml=o,this.workingFileName=this.selectedItem.fileName;const i=(new DOMParser).parseFromString(o,"text/html"),l=i.querySelector(".is-wrapper");if(!l)return!1;const s=l.innerHTML,a=i.querySelectorAll("link");let r="",d="";return a.forEach((e=>{e.href.includes("basetype-")&&(r+=e.outerHTML),e.hasAttribute("data-name")&&(d+=e.outerHTML)})),{html:o,content:s,mainCss:r,sectionCss:d}}async viewBuilder(){let e=document.querySelector(".modal-htmledit");const t=e.querySelector(".modal-content");t.innerHTML=`<iframe src="${this.builder}" style="width:100vw;height:100vh">\n        </iframe>`,t.style.maxWidth="100%",e.classList.add("flex")}async viewText(e){let t=document.querySelector(".modal-textedit");if(frameElement&&!this.panelFullScreen){let e=`\n            <div class="is-modal modal-textedit">\n                <style>\n                    .modal-textedit  {\n                        background: rgb(0 0 0 / 3%);\n                        display:none;\n                        background: transparent;\n                        z-index: 10006;\n                        top:0;left:0;\n                        position:fixed;\n                        width:100vw;\n                        height:100vh;\n                        justify-content: center;\n                        align-items: center;\n                    }\n                    .modal-textedit.flex {\n                        display: flex;\n                    }\n                    .modal-textedit .modal-content {\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;\n                        flex-flow: row wrap;\n                        width: 100%;\n                        height: auto;\n                        max-width:1200px;\n                        box-shadow: 0px 10px 30px 0px rgba(95, 95, 95, 0.19);\n                        border-radius: 5px;\n                        background: rgb(255 255 255 / 100%);\n                        position: relative;\n                    }\n                    .modal-textedit .modal-content textarea {\n                        width: 100%;\n                        height: 60vh;\n                        outline: none;\n                        border: none;\n                        padding: 30px 30px;\n                        font-family: monospace;\n                        font-size: 15px;\n                        background: transparent;\n                        color: ${parent._cb.styleInputColor};\n                    }\n                    .modal-textedit .modal-content button {\n                        display: flex;\n                        cursor: pointer;\n                        align-items: center;\n                        justify-content: center;\n                        white-space: nowrap;\n                        border-radius: 0.25rem;\n                        padding: 0.75rem;\n                        padding-left: 1.5rem;\n                        padding-right: 1.5rem;\n                        font-family: sans-serif; \n                        font-weight: 300;\n                        font-size: 0.875rem;\n                        line-height: 1.25rem;\n                        letter-spacing: 0.025em;\n                        text-decoration-line: none;   \n                        cursor: pointer;\n                        background: ${parent._cb.styleButtonClassicBackground};\n                        color: ${parent._cb.styleButtonClassicColor};\n                    }\n                    .modal-textedit .modal-content button.btn-cancel {\n                        background: transparent;\n                        color: ${parent._cb.styleButtonClassicColor};\n                    }\n                    .modal-textedit .modal-content button.btn-save-file {\n                        min-width: 150px;\n                        border-radius: 0;\n                    }\n                    .modal-textedit .modal-content button.btn-save-file svg {\n                        ${parent._cb?`\n                        color: ${parent._cb.styleModalColor};    \n                        fill: ${parent._cb.styleModalColor};  \n                        `:""}  \n                    }\n\n                    .spinner {\n                        -webkit-animation: rotator 1.4s linear infinite;\n                                animation: rotator 1.4s linear infinite;\n                    }\n                    @-webkit-keyframes rotator {\n                        0% {\n                            transform: rotate(0deg);\n                        }\n                        100% {\n                            transform: rotate(270deg);\n                        }\n                    }\n                    @keyframes rotator {\n                        0% {\n                            transform: rotate(0deg);\n                        }\n                        100% {\n                            transform: rotate(270deg);\n                        }\n                    }\n                    .path {\n                        stroke: ${parent._cb.styleModalColor}; \n                        stroke-dasharray: 187;\n                        stroke-dashoffset: 0;\n                        transform-origin: center;\n                        -webkit-animation: dash 1.4s ease-in-out infinite;\n                                animation: dash 1.4s ease-in-out infinite;\n                    }\n                    @-webkit-keyframes dash {\n                        0% {\n                            stroke-dashoffset: 187;\n                        }\n                        50% {\n                            stroke-dashoffset: 46.75;\n                            transform: rotate(135deg);\n                        }\n                        100% {\n                            stroke-dashoffset: 187;\n                            transform: rotate(450deg);\n                        }\n                    }\n                    @keyframes dash {\n                        0% {\n                            stroke-dashoffset: 187;\n                        }\n                        50% {\n                            stroke-dashoffset: 46.75;\n                            transform: rotate(135deg);\n                        }\n                        100% {\n                            stroke-dashoffset: 187;\n                            transform: rotate(450deg);\n                        }\n                    }\n\n\n                    .dark .modal-textedit * {\n                        scrollbar-width: thin;\n                        scrollbar-color: rgba(255, 255, 255, 0.3) auto;\n                    }\n                    .dark .modal-textedit *::-webkit-scrollbar {\n                        width: 12px;\n                    }\n                    .dark .modal-textedit *::-webkit-scrollbar-track {\n                        background: transparent;\n                    }\n                    .dark .modal-textedit *::-webkit-scrollbar-thumb {\n                        background-color:rgba(255, 255, 255, 0.3);\n                    } \n\n                    .colored-dark .modal-textedit * {\n                        scrollbar-width: thin;\n                        scrollbar-color: rgb(100, 100, 100) auto;\n                    }\n                    .colored-dark .modal-textedit *::-webkit-scrollbar {\n                        width: 12px;\n                    }\n                    .colored-dark .modal-textedit *::-webkit-scrollbar-track {\n                        background: transparent;\n                    }\n                    .colored-dark .modal-textedit *::-webkit-scrollbar-thumb {\n                        background-color:rgb(100, 100, 100);\n                    } \n            \n                    .colored .modal-textedit * {\n                        scrollbar-width: thin;\n                        scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                    }\n                    .colored .modal-textedit *::-webkit-scrollbar {\n                        width: 12px;\n                    }\n                    .colored .modal-textedit *::-webkit-scrollbar-track {\n                        background: transparent;\n                    }\n                    .colored .modal-textedit *::-webkit-scrollbar-thumb {\n                        background-color: rgba(0, 0, 0, 0.4);\n                    } \n            \n                    .light .modal-textedit * {\n                        scrollbar-width: thin;\n                        scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                    }\n                    .light .modal-textedit *::-webkit-scrollbar {\n                        width: 12px;\n                    }\n                    .light .modal-textedit *::-webkit-scrollbar-track {\n                        background: transparent;\n                    }\n                    .light .modal-textedit *::-webkit-scrollbar-thumb {\n                        background-color: rgba(0, 0, 0, 0.4);\n                    } \n                </style>\n                <div class="is-modal-content modal-content" style="\n                    display: flex;\n                    justify-content: center;\n                    justify-content: center;\n                    flex-flow: row wrap;\n                    width: 100%;\n                    height: auto;\n                    max-width:1200px;\n                    box-shadow: 0px 10px 30px 0px rgba(95, 95, 95, 0.19);\n                    border-radius: 5px;\n                    ${parent._cb?`\n                    background: ${parent._cb.styleModalBackground};\n                    color: ${parent._cb.styleModalColor};\n                    `:"\n                    background: rgb(255 255 255 / 100%);\n                    "}\n                    position: relative;">\n\n                    <textarea class="inp-textedit"></textarea>\n        \n                    <div class="flex justify-end w-full">\n                        <div class="save-info flex items-center"></div>\n                        <div class="flex">\n                            <button class="btn-cancel mr-4" title="${this.out("Cancel")}">${this.out("Cancel")}</button>\n                            <button class="btn-save-file" title="${this.out("Save")}">${this.out("Save")}</button>\n                        </div>\n                    </div>\n        \n                </div>\n            </div>\n            `,n=parent.document.querySelector(".modal-textedit");n&&n.parentNode.removeChild(n),parent.document.body.insertAdjacentHTML("beforeend",e),t=parent.document.querySelector(".modal-textedit")}const n=t.querySelector(".modal-content"),o=n.querySelector("textarea"),i=n.querySelector(".btn-cancel"),l=n.querySelector(".btn-save-file");frameElement&&!this.panelFullScreen&&(o.addEventListener("keydown",(e=>{if("Tab"===e.key){e.preventDefault();const t=o.selectionStart,n=o.selectionEnd,i="\t";o.value=o.value.substring(0,t)+i+o.value.substring(n),o.selectionStart=o.selectionEnd=t+i.length}})),l.addEventListener("click",(async()=>{const e=Date.now();l.innerHTML=`\n                <svg class="spinner" width="14px" height="14px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">\n                    <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>\n                </svg>\n                <span style="margin-left:10px">${this.out("Save")}</span>\n                `;const n={fileName:this.selectedItem.fileName,text:t.querySelector("textarea").value,folderPath:this.folderPath};let o={...this.headers,...this.defaultHeaders};const i=await fetch(this.settings.saveTextUrl,{method:"POST",body:JSON.stringify(n),headers:o}),s=await i.json(),a=Date.now()-e;a<300&&await new Promise((e=>setTimeout(e,350-a))),l.innerHTML=`\n                ${this.out("Save")}\n                `,s.error&&alert(this.out("Failed to save the file."))})));const s=Date.now();e.includes("http")?e=this.viewFileUrl+"?url="+e:e.includes("?")||(e+=`?t=${s}`);const a=await fetch(e),r=await a.text();o.value=r;const d=()=>{t.classList.remove("flex"),document.removeEventListener("keydown",this.handleKeyDown)};i&&i.addEventListener("click",(()=>{d()})),t.classList.add("flex"),this.handleKeyDown=e=>{"Escape"===e.key&&d()},document.addEventListener("keydown",this.handleKeyDown),frameElement&&parent.document.addEventListener("keydown",this.handleKeyDown)}viewMedia(e){const t=e.split(".").pop().toLowerCase();if("jpg"!==t&&"jpeg"!==t&&"png"!==t&&"gif"!==t&&"webp"!==t&&"bmp"!==t&&"tiff"!==t&&"mp4"!==t&&"mov"!==t&&"mp3"!==t&&"pdf"!==t&&"txt"!==t&&"css"!==t&&"js"!==t&&"html"!==t&&"md"!==t&&"svg"!==t&&"json"!==t)return;let n=document.querySelector(".modal-view");if(frameElement&&!this.panelFullScreen){let e='\n            <div class="is-modal modal-view">\n                <style>\n                    .modal-view  {\n                        display:none;\n                        background: transparent;\n                        z-index: 10006;\n                        top:0;left:0;\n                        position:fixed;\n                        width:100vw;\n                        height:100vh;\n                        justify-content: center;\n                        align-items: center;\n                    }\n                    .modal-view.flex {\n                        display: flex;\n                    }\n                    .modal-view .modal-content {\n                        width: 100%;\n                        height: 100%;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;\n                    }\n                    .modal-view .modal-content img {\n                        max-width: 70%;\n                        max-height: 70%;\n                        -o-object-fit: contain;\n                        object-fit: contain;\n                        box-shadow: 0px 15px 30px 0px rgba(95, 95, 95, 0.39);\n                        background: #fff;\n                        border-radius: 5px;\n                    }\n                    .modal-view .modal-content video {\n                        max-width: 70%;\n                        max-height: 70%;\n                        background: #000;\n                        box-shadow: 0px 15px 30px 0px rgb(95 95 95 / 39%);\n                        border-radius: 5px;\n                    }\n                    .modal-view .modal-content audio {\n                        max-width: 70%;\n                        max-height: 70%;\n                    }\n                    .modal-view .modal-content iframe {\n                        max-width: 80%;\n                        max-height: 80%;\n                        box-shadow: 0px 15px 30px 0px rgb(95 95 95 / 39%);\n                        background: #fff;\n                        border-radius: 5px;\n                    }\n                }\n                </style>\n                <div class="modal-content">\n        \n                </div>\n            </div>\n            ',t=parent.document.querySelector(".modal-view");t&&t.parentNode.removeChild(t),parent.document.body.insertAdjacentHTML("beforeend",e),n=parent.document.querySelector(".modal-view")}const o=n.querySelector(".modal-content");if(n.classList.add("flex"),"jpg"===t||"jpeg"===t||"png"===t||"gif"===t||"webp"===t||"bmp"===t||"tiff"===t)o.innerHTML=`<img src="${e}"/>`;else if("mp4"===t||"mov"===t)o.innerHTML=`<video playsinline controls autoplay width="100%">\n                <source src="${e}" type="video/mp4">\n            </video>`;else if("mp3"===t)o.innerHTML=`<audio controls autoplay>\n                <source src="${e}" type="audio/mp3">\n                Your browser does not support the audio element.\n            </audio>`;else if("txt"===t||"css"===t||"js"===t||"html"===t||"md"===t||"svg"===t||"json"===t||"pdf"===t){const t=Date.now();e.includes("http")?e+=`?t=${t}`:e.includes("?")||(e+=`?t=${t}`),o.innerHTML=`<iframe src="${e}" style="width:70vw;height:70vh">\n            </iframe>`}const i=()=>{if(n.classList.remove("flex"),document.removeEventListener("keydown",this.handleKeyDown),n.removeEventListener("click",l),frameElement){let e=parent.document.querySelector(".modal-view");e&&e.parentNode.removeChild(e)}n.querySelector(".modal-content").innerHTML="",this.focusBack()},l=e=>{if("mp4"===t||"mov"===t||"mp3"===t){let t=e.target;t&&"video"!==t.tagName.toLowerCase()&&"audio"!==t.tagName.toLowerCase()&&i()}else i()};this.handleKeyDown=e=>{let t=e.target;t&&t.blur(),"Escape"===e.key&&i()};const s=n.querySelector(".btn-close");s&&s.addEventListener("click",(()=>{i()})),document.addEventListener("keydown",this.handleKeyDown),n.addEventListener("click",l)}async upscaleImage(e,t,n){if(this.demoMode)return void alert(this.out("This function is disabled in this demo."));this.startProcess(),e.includes("http")?e=this.viewFileUrl+"?url="+e:e.includes("?");const o=t,i=n,l=new Image;l.src=e,l.onload=async()=>{var e=document.createElement("canvas");e.width=o,e.height=i,e.getContext("2d").drawImage(l,0,0,o,i);let t=e.toDataURL("image/jpeg");t=t.replace(/^data:image\/(png|jpeg);base64,/,"");const n={image:t,folder_path:this.folderPath};let s={...this.headers,...this.defaultHeaders};await fetch(this.upscaleImageUrl,{method:"POST",headers:s,body:JSON.stringify(n)}),this.fetchFolderContents(this.folderPath),this.finishProcess()}}async getBase64(){const e=document.querySelector(".div-img-control-preview").querySelector("img");if(!e)return!1;const t=(e,t)=>new Promise((n=>{const o=new Image;o.crossOrigin="Anonymous",o.onload=function(){let e,o=document.createElement("CANVAS"),i=o.getContext("2d");o.height=this.naturalHeight,o.width=this.naturalWidth,i.drawImage(this,0,0),e=o.toDataURL(t),n(e)},o.src=e}));let n=e.getAttribute("src");n.includes("http")?n=this.viewFileUrl+"?url="+n:n.includes("?");try{let e=await t(n,"image/jpeg");return e=e.replace(/^data:image\/(png|jpeg);base64,/,""),e}catch(e){return console.error("Error:",e),!1}}async generateImage(e,t){if(this.demoMode)return void alert(this.out("This function is disabled in this demo."));if(!this.textToImageUrl)return;let n=!1;this.promptHistory.forEach((t=>{(t=(t=(t=t.replace(/\n/g," ")).replace(/\s\s/g," ")).toLowerCase())===(e=(e=(e=e.replace(/\n/g," ")).replace(/\s\s/g," ")).toLowerCase())&&(n=!0)})),n||(this.promptHistory.push(e),localStorage.setItem("_prompt_history",JSON.stringify(this.promptHistory))),this.controller=new AbortController,this.signal=this.controller.signal,this.startProcess();const o=document.querySelector(".inp-width"),i=document.querySelector(".inp-height"),l=document.querySelector(".inp-model"),s=document.querySelector(".inp-steps"),a=document.querySelector(".inp-guidance"),r=document.querySelector(".inp-sampler"),d=document.querySelector(".inp-controlnet"),c=l.value,h=o.value,p=i.value,u=s.value,m=a.value,v=r.value,g=await this.getBase64(),f=d.value;c.includes("realistic-vision")&&""===t&&(t="duplicate, (deformed iris, deformed pupils, semi-realistic, cgi, 3d, render, sketch, cartoon, drawing, anime:1.4), text, close up, cropped, out of frame, worst quality, low quality, jpeg artifacts, ugly, duplicate, morbid, mutilated, extra fingers, mutated hands, poorly drawn hands, poorly drawn face, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, extra limbs, cloned face, disfigured, gross proportions, malformed limbs, missing arms, missing legs, extra arms, extra legs, fused fingers, too many fingers, long neck, bad_prompt_version2, bad-hands-5, badhandv4, bad anatomy, deformed, mutated, amputated, missing finger, extra finger, fused fingers, missing leg, extra leg, fused legs, missing digit, extra digit, fused digits, missing hand, extra hand, fused hands, missing arm, extra arm, fused arms, missing limb, extra limb, fused limbs, fused bodies, merged bodies, extra bodies, dual bodies, extra navel, elongated body, missing joint, extra joint, fused joints, deformed hip, twisted limbs, twisted legs, twisted arms, missing head, extra head, double head, twins, missing ear, extra ear, deformed ear, black and white, monochrome, multiple views, blurry, text, signature, head out of frame, paintings, sketches, (worst quality:2), (low quality:2), (normal quality:2), lowres, grayscale, glans, bad hands, error, extra digit, fewer digits, cropped, jpeg artifacts, watermark, username, bad feet, poorly drawn hands, poorly drawn face, mutation, too many fingers, long neck, long body, long arms, cross-eyed, mutated hands, polar lowres, bad body, bad proportions, gross proportions, cropped head , bad eyes, extra breast, missing breast, fused breasts, unnatural proportions, necklace");const y={model:c,prompt:e,negative_prompt:t,width:h,height:p,steps:u||75,guidance:m||9,image:g||void 0,controlnet:g?f:void 0,scheduler:v,output_format:"jpeg",folder_path:this.folderPath};try{let e;e=g?this.controlNetUrl:this.textToImageUrl;let t={...this.headers,...this.defaultHeaders};const n=await fetch(e,{signal:this.signal,method:"POST",headers:t,body:JSON.stringify(y)}),o=await n.json();if(this.fetchFolderContents(this.folderPath),o.error)return void console.log("Error:\n"+o.error)}catch(e){"AbortError"===e.name||console.error("Error:",e)}this.finishProcess()}toggleSelection(){this.isToggleOn=!this.isToggleOn;const e=document.querySelector(".file-list"),t=document.querySelectorAll(".file-list li"),n=document.querySelector(".btn-toggle-select");this.isToggleOn?(n.classList.add("on"),n.innerHTML=`<span>${this.out("Cancel")}</span>`,t.forEach((e=>{e.classList.remove("selected")})),e.classList.add("bulk-select")):(t.forEach((e=>{e.classList.remove("selected")})),n.classList.remove("on"),n.innerHTML=`<svg class="mr-1"><use xlink:href="#icon-files"></use></svg><span>${this.out("Select")}</span>`,e.classList.remove("bulk-select")),this.selectedFolder=null,this.selectedItems=[],this.singleSelectedItem=null,this.showHideButtons();document.querySelector(".inp-url").value=""}getItemName(e){const t=e.querySelector("a span[data-name]");return t?t.getAttribute("data-name"):""}updateSelectedItems(){this.selectedItems=Array.from(document.querySelectorAll(".file-list li.selected")).map((e=>this.getItemName(e))),this.showHideButtons()}toggleHighlight(e){this.isToggleOn&&(e.classList.toggle("selected"),this.updateSelectedItems())}async showHideButtons(){const e=document.querySelector(".div-selectall"),t=document.querySelector(".btn-refresh"),n=document.querySelector(".btn-folder"),o=document.querySelector(".btn-delete-files"),i=document.querySelector(".btn-move-files"),l=document.querySelector(".btn-rename"),s=document.querySelector(".btn-filemore"),a=document.querySelector(".dragdrop-info");if(e.style.display="none",t&&(t.style.display="none"),n.style.display="none",o.style.display="none",i.style.display="none",l.style.display="none",s.style.display="none",a.style.display="",this.isToggleOn)this.selectedItems.length>0&&(o.style.display="",i.style.display="",a.style.display="none"),1===this.selectedItems.length&&(l.style.display=""),e.style.display="";else{if(t&&(t.style.display=""),n.style.display="",this.singleSelectedItem)o.style.display="",i.style.display="",l.style.display="",s.style.display="",a.style.display="none";else{document.querySelector(".inp-url").value=""}document.querySelector(".chk-selectall").checked=!1}const r=document.querySelector(".file-info"),d=r.querySelector(".file-info-details"),c=r.querySelector(".no-selection-info");this.isToggleOn?(d.style.display="none",c.style.display="",c.innerHTML=this.out("Multiple selection mode.")):this.singleSelectedItem&&r.classList.contains("active")?(this.renderFileInfo(),d.style.display="",c.style.display="none"):(d.style.display="none",c.style.display="",c.innerHTML=this.out("No selected file."))}async selectFolder(e){document.querySelectorAll(".file-list li").forEach((e=>{e.classList.remove("selected")})),e.classList.add("selected"),this.singleSelectedItem=null;if(e.querySelector("[data-name]")){const t=e.querySelector("[data-name]").getAttribute("data-name");this.selectedFolder=t}else this.selectedFolder=null;this.showHideButtons()}async selectFile(e,t){const n=this.selectedItem.fileName,o=this.selectedItem.url;document.querySelector(".inp-url").value=o;if(document.querySelectorAll(".file-list li").forEach((e=>{e.classList.remove("selected")})),e.classList.add("selected"),this.selectedFolder=null,this.singleSelectedItem=n,this.showHideButtons(),window._page={},t&&this.enableBuilder){if("html"===o.split(".").pop().toLowerCase()){let e=await this.getContent(o);e&&(window._page={html:e.html,content:e.content,mainCss:e.mainCss,sectionCss:e.sectionCss,fileName:n,folderPath:this.folderPath})}}}isToggleButtonOn(){return this.isToggleOn}shortenText(e){return e.length<=18?e:e.slice(0,18)+"..."}renderBreadcrumb(e){const t=document.querySelector(".div-breadcrumb");let n="",o="";const i=e.split("/");let l=0;i.forEach((e=>{l++,n+=""===n?e:"/"+e,l===i.length?o+=` <span class="separator">></span> <span>${e}</span>`:o+=` <span class="separator">></span> <a class="underline" href="${n}">${e}</a>`})),t.innerHTML=""!==e?`<a class="underline" href="">${this.out("home")}</a>`+o:"<span>home</span>";t.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(t=>{const n=e.getAttribute("href");this.fetchFolderContents(n),t.preventDefault()}))}))}async renderListView(){this.flexDirection="column",localStorage.setItem("_view","list");let e=this.folderPath;const t=document.querySelector(".file-list");t.innerHTML="",t.classList.add("listview"),t.classList.remove("gallery");const n=document.createElement("li"),o=document.createElement("a");o.href="javascript:void(0)",o.title=this.out("UP"),o.insertAdjacentHTML("afterbegin",'<svg><use xlink:href="#icon-arrow-back-up"></use></svg>'),o.style.justifyContent="flex-start",n.style.outline="none",n.classList.add("btn-up"),n.setAttribute("tabIndex",0),n.setAttribute("role","button"),n.addEventListener("click",(()=>{const t=e.split("/").slice(0,-1).join("/");this.fetchFolderContents(t)})),n.appendChild(o),""!==e&&t.appendChild(n),this.objects.forEach((n=>{"file"===n.type&&!n.url.includes("http")&&this.viewUrl&&(n.url=this.viewUrl+"?url="+n.url);const o=document.createElement("li");if("folder"===n.type){const t=document.createElement("a");t.href="javascript:void(0)";let i='<svg><use xlink:href="#icon-folder"></use></svg>';t.insertAdjacentHTML("afterbegin",i),t.style.justifyContent="flex-start";const l=document.createElement("span");l.textContent=`${this.shortenText(n.name)}`,l.setAttribute("data-name",n.name),t.appendChild(l),o.addEventListener("click",(()=>{if(this.isToggleOn)return;const t=this.pathJoin([e,n.name]);this.fetchFolderContents(t)})),o.appendChild(t)}else{const e=document.createElement("a"),t=n.name.split(".").pop().toLowerCase();let i="";i="jpg"===t||"jpeg"===t||"png"===t||"gif"===t||"webp"===t||"bmp"===t||"tiff"===t?'<svg style="width:20px;height:20px;"><use xlink:href="#icon-photo"></use></svg>':"mp3"===t?'<svg><use xlink:href="#icon-audio"></use></svg>':"mp4"===t||"mov"===t?'<svg style="margin-bottom:-7px;"><use xlink:href="#icon-movie"></use></svg>':"txt"===t||"md"===t||"rtf"===t?'<svg><use xlink:href="#icon-file-text"></use></svg>':"js"===t||"json"===t?'<svg><use xlink:href="#icon-file-type-js"></use></svg>':"html"===t?'<svg><use xlink:href="#icon-file-type-html"></use></svg>':"css"===t?'<svg><use xlink:href="#icon-file-type-css"></use></svg>':"pdf"===t?'<svg><use xlink:href="#icon-file-type-pdf"></use></svg>':"zip"===t?'<svg><use xlink:href="#icon-file-type-zip"></use></svg>':"svg"===t?'<svg><use xlink:href="#icon-file-type-svg"></use></svg>':"csv"===t?'<svg><use xlink:href="#icon-file-type-csv"></use></svg>':"ppt"===t||"pptx"===t?'<svg><use xlink:href="#icon-file-type-ppt"></use></svg>':"doc"===t?'<svg><use xlink:href="#icon-file-type-doc"></use></svg>':"docx"===t?'<svg><use xlink:href="#icon-file-type-docx"></use></svg>':"xls"===t||"xlsx"===t?'<svg><use xlink:href="#icon-file-type-xls"></use></svg>':'<svg><use xlink:href="#icon-file"></use></svg>';let l=document.createElement("span");e.appendChild(l),l.insertAdjacentHTML("afterbegin",i);let s=document.createElement("span");s.textContent=`${this.shortenText(n.name)}`,s.setAttribute("data-name",n.name),s.setAttribute("data-size",n.size),s.setAttribute("data-modified",n.modified),s.setAttribute("data-created",n.created),l.appendChild(s);let a=document.createElement("span");e.appendChild(a);let r=document.createElement("span");r.textContent=n.size,r.classList.add("size-info"),a.appendChild(r);let d=document.createElement("span");d.textContent=`${this.beautifyDate(n.modified,this.dateShortOptions)}`,d.classList.add("date-info"),a.appendChild(d),o.setAttribute("data-url",n.url),o.setAttribute("tabIndex",0),o.setAttribute("role","button"),o.appendChild(e)}t.appendChild(o)}));const i=document.querySelectorAll(".file-list li");i.forEach((e=>{e.addEventListener("click",(()=>{this.toggleHighlight(e),e.getAttribute("data-url")&&(this.isToggleOn||(this.selectedItem={url:e.getAttribute("data-url"),fileName:e.querySelector("[data-name]").getAttribute("data-name"),fileSize:e.querySelector("[data-size]").getAttribute("data-size"),modified:e.querySelector("[data-modified]").getAttribute("data-modified"),created:e.querySelector("[data-created]").getAttribute("data-created")},this.selectFile(e)))})),e.addEventListener("dblclick",(()=>{if(e.getAttribute("data-url"))if(this.isToggleOn||(this.selectedItem={url:e.getAttribute("data-url"),fileName:e.querySelector("[data-name]").getAttribute("data-name"),fileSize:e.querySelector("[data-size]").getAttribute("data-size"),modified:e.querySelector("[data-modified]").getAttribute("data-modified"),created:e.querySelector("[data-created]").getAttribute("data-created")},this.selectFile(e)),this.settings.filePicker){document.querySelector(".btn-select").click()}else this.viewMedia(this.selectedItem.url),e.focus()})),e.onselectstart=function(){return!1}}));const l=document.querySelector(".chk-selectall");l.checked=!1,l.addEventListener("click",(()=>{l.checked?(i.forEach((e=>{e.classList.contains("btn-up")||e.classList.add("selected")})),t.querySelector(".selected")&&this.updateSelectedItems()):(i.forEach((e=>{e.classList.remove("selected")})),this.updateSelectedItems())}));document.querySelectorAll(".tooltip").forEach((e=>{e.getAttribute("title")&&(e.setAttribute("data-title",e.getAttribute("title")),e.removeAttribute("title"))})),this.selectedFolder=null,this.selectedItems=[],this.singleSelectedItem=null,this.showHideButtons()}async renderObjects(e){this.flexDirection="row",e?localStorage.setItem("_view","icons"):localStorage.setItem("_view","gallery");let t=this.folderPath;const n=document.querySelector(".file-list");n.innerHTML="",n.classList.add("gallery"),n.classList.remove("listview");const o=document.createElement("li"),i=document.createElement("a");i.href="javascript:void(0)",i.title=this.out("UP"),i.insertAdjacentHTML("afterbegin",'<svg><use xlink:href="#icon-arrow-back-up"></use></svg>'),i.style.justifyContent="center",o.style.outline="none",o.classList.add("btn-up"),o.setAttribute("tabIndex",0),o.setAttribute("role","button"),o.addEventListener("click",(()=>{const e=t.split("/").slice(0,-1).join("/");this.fetchFolderContents(e)})),o.appendChild(i),""!==t&&n.appendChild(o),this.objects.forEach((o=>{"file"===o.type&&!o.url.includes("http")&&this.viewUrl&&(o.url=this.viewUrl+"?url="+o.url);const i=document.createElement("li");if("folder"===o.type){const e=document.createElement("a");e.href="javascript:void(0)";const n=document.createElement("span");e.appendChild(n);let l='<svg><use xlink:href="#icon-folder"></use></svg>';n.insertAdjacentHTML("afterbegin",l);const s=document.createElement("span");s.textContent=`${this.shortenText(o.name)}`,s.setAttribute("data-name",o.name),e.appendChild(s),i.addEventListener("click",(()=>{if(this.isToggleOn)return;const e=this.pathJoin([t,o.name]);this.fetchFolderContents(e)})),i.appendChild(e)}else{const t=document.createElement("a"),n=o.url,l=o.name.split(".").pop().toLowerCase();let s="";const a=document.createElement("span");if(t.appendChild(a),e||"jpg"!==l&&"jpeg"!==l&&"png"!==l&&"gif"!==l&&"webp"!==l&&"bmp"!==l&&"tiff"!==l)a.style.flex="none",s=!e||"jpg"!==l&&"jpeg"!==l&&"png"!==l&&"gif"!==l&&"webp"!==l&&"bmp"!==l&&"tiff"!==l?"mp3"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-audio"></use></svg>':"mp4"===l||"mov"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-movie"></use></svg>':"txt"===l||"md"===l||"rtf"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-text"></use></svg>':"js"===l||"json"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-type-js"></use></svg>':"html"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-type-html"></use></svg>':"css"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-type-css"></use></svg>':"pdf"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-type-pdf"></use></svg>':"zip"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-type-zip"></use></svg>':"svg"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-type-svg"></use></svg>':"csv"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-type-csv"></use></svg>':"ppt"===l||"pptx"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-type-ppt"></use></svg>':"doc"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-type-doc"></use></svg>':"docx"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-type-docx"></use></svg>':"xls"===l||"xlsx"===l?'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file-type-xls"></use></svg>':'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-file"></use></svg>':'<svg style="margin:10px 0 0 12px;"><use xlink:href="#icon-photo"></use></svg>',a.insertAdjacentHTML("afterbegin",s);else{const e=document.createElement("img");if(e.src=n,a.appendChild(e),!this.filesOnly){const e=document.createElement("button");if(e.className="btn-control-image tooltip",e.innerHTML='<svg style="width:17px;height:17px;"><use xlink:href="#icon-plus"></use></svg>',e.title=this.out("Use as image control"),e.tabIndex=-1,a.appendChild(e),o.name.includes("-lg."))e.style.left="";else{const t=document.createElement("button");t.className="btn-upscale tooltip",t.innerHTML='<svg style="width:20px;height:20px;"><use xlink:href="#icon-upscale"></use></svg>',t.title=this.out("Upscale"),t.tabIndex=-1,a.appendChild(t),e.style.left="36px"}}}if("jpg"===l||"jpeg"===l||"png"===l||"gif"===l||"webp"===l||"bmp"===l||"tiff"===l||"mp4"===l||"mov"===l||"mp3"===l||"pdf"===l){const e=document.createElement("button");e.className="btn-view tooltip",e.innerHTML='<svg style="width:19px;height:19px;"><use xlink:href="#icon-zoom-in"></use></svg>',e.title=this.out("View"),e.tabIndex=-1,a.appendChild(e)}else if("txt"===l||"css"===l||"js"===l||"html"===l||"md"===l||"svg"===l||"json"===l){const e=document.createElement("button");e.className="btn-edit tooltip",e.innerHTML='<svg style="width:17px;height:17px;margin-top:-2px"><use xlink:href="#icon-edit"></use></svg>',e.title=this.out("Edit"),e.tabIndex=-1,e.style.right="37px",a.appendChild(e);const t=document.createElement("button");t.className="btn-view tooltip",t.innerHTML='<svg style="width:19px;height:19px;"><use xlink:href="#icon-zoom-in"></use></svg>',t.title=this.out("View"),t.tabIndex=-1,a.appendChild(t)}else if("csv"===l){const e=document.createElement("button");e.className="btn-edit tooltip",e.innerHTML='<svg style="width:17px;height:17px;margin-top:-2px"><use xlink:href="#icon-edit"></use></svg>',e.title=this.out("Edit"),e.tabIndex=-1,a.appendChild(e)}const r=document.createElement("button");r.className="btn-trash tooltip",r.innerHTML='<svg style="width:17px;height:17px;"><use xlink:href="#icon-trash"></use></svg>',r.title=this.out("Delete"),r.tabIndex=-1,a.appendChild(r);const d=document.createElement("button");d.className="btn-download tooltip",d.innerHTML='<svg style="width:17px;height:17px;"><use xlink:href="#icon-download"></use></svg>',d.title=this.out("Download"),d.tabIndex=-1,a.appendChild(d);const c=document.createElement("button");c.className="btn-info tooltip",c.innerHTML='<svg style="width:19px;height:19px;"><use xlink:href="#icon-info"></use></svg>',c.title=this.out("File Info"),c.tabIndex=-1,a.appendChild(c);let h=document.createElement("span");h.textContent=`${this.shortenText(o.name)}`,h.setAttribute("data-name",o.name),h.setAttribute("data-size",o.size),h.setAttribute("data-modified",o.modified),h.setAttribute("data-created",o.created),t.appendChild(h);let p=document.createElement("span");p.textContent=`${o.size}`,t.appendChild(p);let u=document.createElement("span");u.textContent=`${this.beautifyDate(o.modified,this.dateShortOptions)}`,t.appendChild(u);const m=e=>{const t=e.getAttribute("data-name"),n=document.createElement("input");n.type="text",n.value=t;const o=()=>{const i=n.value;if(i===t)return n.blur(),n.removeEventListener("blur",o),void(e.textContent=this.shortenText(t));if(this.demoMode)return n.blur(),n.removeEventListener("blur",o),e.textContent=this.shortenText(t),void alert(this.out("This function is disabled in this demo."));if(!i)return void alert(this.out("Please enter a file name."));e.setAttribute("data-name",i),n.removeEventListener("blur",o),e.textContent=this.shortenText(i);const l={currentName:t,newName:i,folderPath:this.folderPath};let s={...this.headers,...this.defaultHeaders};fetch(this.settings.renameFileUrl,{method:"POST",body:JSON.stringify(l),headers:s}).catch((e=>{console.error("Error:",e)}))};n.addEventListener("blur",o),n.addEventListener("keydown",(i=>{"Enter"===i.key&&(o(),i.preventDefault(),i.stopImmediatePropagation(),this.focusBack()),"Escape"===i.key&&(n.removeEventListener("blur",o),e.textContent=this.shortenText(t),this.focusBack())})),n.addEventListener("keydown",(e=>{const t=this.validFileNamePattern,n=e.key;t.test(n)||"Backspace"===n||"Delete"===n||e.preventDefault()})),e.textContent="",e.appendChild(n),n.focus()};h.addEventListener("click",(()=>{this.isToggleOn||h.querySelector("input")||h.closest(".selected")&&m(h)})),i.setAttribute("data-url",o.url),i.setAttribute("tabIndex",0),i.setAttribute("role","button"),i.appendChild(t)}n.appendChild(i);const l=i.querySelector(".btn-upscale");l&&l.addEventListener("click",(()=>{const e=i.querySelector("img"),t=e.naturalWidth,n=e.naturalHeight,l=o.url;this.upscaleImage(l,t,n)}));const s=i.querySelector(".btn-view");s&&s.addEventListener("click",(()=>{this.selectedItem={url:i.getAttribute("data-url"),fileName:i.querySelector("[data-name]").getAttribute("data-name"),fileSize:i.querySelector("[data-size]").getAttribute("data-size"),modified:i.querySelector("[data-modified]").getAttribute("data-modified"),created:i.querySelector("[data-created]").getAttribute("data-created")},this.viewMedia(o.url)}));const a=i.querySelector(".btn-edit");a&&a.addEventListener("click",(async()=>{this.selectedItem={url:i.getAttribute("data-url"),fileName:i.querySelector("[data-name]").getAttribute("data-name"),fileSize:i.querySelector("[data-size]").getAttribute("data-size"),modified:i.querySelector("[data-modified]").getAttribute("data-modified"),created:i.querySelector("[data-created]").getAttribute("data-created")},this.enableBuilder&&window._page.fileName?this.viewBuilder():this.viewText(o.url)}));const r=i.querySelector(".btn-trash");r&&r.addEventListener("click",(async e=>{this.selectedItem={url:i.getAttribute("data-url"),fileName:i.querySelector("[data-name]").getAttribute("data-name"),fileSize:i.querySelector("[data-size]").getAttribute("data-size"),modified:i.querySelector("[data-modified]").getAttribute("data-modified"),created:i.querySelector("[data-created]").getAttribute("data-created")},await this.selectFile(i,!0),this.deleteSelected(),e.preventDefault(),e.stopImmediatePropagation()}));const d=i.querySelector(".btn-download");d&&d.addEventListener("click",(()=>{const e=document.createElement("a");e.href=o.url,e.download=o.name,e.click()}));const c=i.querySelector(".btn-info");c&&c.addEventListener("click",(async e=>{this.selectedItem={url:i.getAttribute("data-url"),fileName:i.querySelector("[data-name]").getAttribute("data-name"),fileSize:i.querySelector("[data-size]").getAttribute("data-size"),modified:i.querySelector("[data-modified]").getAttribute("data-modified"),created:i.querySelector("[data-created]").getAttribute("data-created")},await this.selectFile(i,!0),this.showPanelInfo(),e.preventDefault(),e.stopImmediatePropagation()}));const h=i.querySelector(".btn-control-image");h&&h.addEventListener("click",(()=>{document.querySelector(".div-img-control").style.display="block";document.querySelector(".div-img-control-preview").innerHTML=`<img src="${o.url}" style="object-fit:contain" />`,localStorage.setItem("_img_imagecontrol",o.url)}))}));const l=document.querySelectorAll(".file-list li");l.forEach((e=>{e.addEventListener("click",(()=>{this.toggleHighlight(e),e.getAttribute("data-url")&&(this.isToggleOn||(this.selectedItem={url:e.getAttribute("data-url"),fileName:e.querySelector("[data-name]").getAttribute("data-name"),fileSize:e.querySelector("[data-size]").getAttribute("data-size"),modified:e.querySelector("[data-modified]").getAttribute("data-modified"),created:e.querySelector("[data-created]").getAttribute("data-created")},this.selectFile(e)))})),e.addEventListener("dblclick",(()=>{if(e.getAttribute("data-url"))if(this.isToggleOn||(this.selectedItem={url:e.getAttribute("data-url"),fileName:e.querySelector("[data-name]").getAttribute("data-name"),fileSize:e.querySelector("[data-size]").getAttribute("data-size"),modified:e.querySelector("[data-modified]").getAttribute("data-modified"),created:e.querySelector("[data-created]").getAttribute("data-created")},this.selectFile(e)),this.settings.filePicker){document.querySelector(".btn-select").click()}else this.viewMedia(this.selectedItem.url),e.focus()})),e.onselectstart=function(){return!1}}));const s=document.querySelector(".chk-selectall");s.checked=!1,s.addEventListener("click",(()=>{s.checked?(l.forEach((e=>{e.classList.contains("btn-up")||e.classList.add("selected")})),n.querySelector(".selected")&&this.updateSelectedItems()):(l.forEach((e=>{e.classList.remove("selected")})),this.updateSelectedItems())}));document.querySelectorAll(".tooltip").forEach((e=>{e.getAttribute("title")&&(e.setAttribute("data-title",e.getAttribute("title")),e.removeAttribute("title"))})),this.selectedFolder=null,this.selectedItems=[],this.singleSelectedItem=null,this.showHideButtons()}async fetchFolderContents(e){this.renderBreadcrumb(e),this.folderPath=e,localStorage.setItem("_folder_path",e);let t={...this.headers,...this.defaultHeaders};const n={folderPath:e},o=await fetch(this.settings.listFilesUrl,{method:"POST",body:JSON.stringify(n),headers:t}),i=await o.json();this.objects=i.contents,this.selectedFolder=null,this.selectedItems=[],this.singleSelectedItem=null,this.updateSelectedItems(),this.isToggleOn&&this.toggleSelection();const l=localStorage.getItem("_view");l?"list"===l?this.renderListView():"icons"===l?this.renderObjects(!0):"gallery"===l&&this.renderObjects():this.renderObjects(),this.prepareItemsNavigation(),i.folders?this.getFolders(i.folders):this.getFolders()}beautifyDate(e,t,n=!0){let o=this.showRelativeTime;n||(o=!1);const i=new Date,l=new Date(e),s=(i-l)/1e3,a=s/60,r=a/60,d=r/24;if(o){if(s<60)return`${Math.floor(s)} seconds ago`;if(a<60)return`${Math.floor(a)} minutes ago`;if(r<24)return`${Math.floor(r)} hours ago`;if(d<30)return`${Math.floor(d)} days ago`}return new Intl.DateTimeFormat(this.locale,t).format(l)}renderFileInfo(){const e=document.querySelector(".file-info"),t=this.selectedItem.url,n=this.selectedItem.fileName,o=this.selectedItem.fileSize,i=this.selectedItem.modified,l=e.querySelector(".dimension-info");e.querySelector(".div-filename").innerHTML=n;e.querySelector(".div-filesize").innerHTML=o;e.querySelector(".div-modifieddate").innerHTML=this.beautifyDate(i,this.dateLongOptions,!1);e.querySelector(".div-url").innerHTML=`<a target="_blank" href="${t}">${t}</a>`;const s=e.querySelector(".div-imagepreview");s.innerHTML="";const a=e.querySelector(".btn-edit"),r=e.querySelector(".btn-view"),d=e.querySelector(".btn-upscale"),c=e.querySelector(".btn-control-image");l.style.display="none",a.style.display="none",r.style.display="none",d.style.display="none",c.style.display="none";const h=n.split(".").pop().toLowerCase();if("jpg"===h||"jpeg"===h||"png"===h||"gif"===h||"webp"===h||"bmp"===h||"tiff"===h){l.style.display="",this.filesOnly||(c.style.display="",n.includes("-lg.")||(d.style.display=""));const o=e.querySelector(".div-dimension");var p=new Image;p.onload=function(){let e=p.naturalWidth,t=p.naturalHeight;o.innerHTML=`${e}x${t}`},p.src=t,s.innerHTML=`<img src="${t}">`}"jpg"===h||"jpeg"===h||"png"===h||"gif"===h||"webp"===h||"bmp"===h||"tiff"===h||"mp4"===h||"mov"===h||"mp3"===h||"pdf"===h?r.style.display="":"txt"===h||"css"===h||"js"===h||"html"===h||"md"===h||"svg"===h||"json"===h?(a.style.display="",r.style.display=""):"csv"===h&&(a.style.display="")}pathJoin(e){return""===(e=e.map(((t,n)=>(n&&(t=t.replace(new RegExp("^/"),"")),n!==e.length-1&&(t=t.replace(new RegExp("/$"),"")),t))))[0]&&e.shift(),e.join("/")}async moveSelected(e){if(this.demoMode)return void alert(this.out("This function is disabled in this demo."));let t;t=this.isToggleOn&&this.selectedItems.length>0?{selectedItems:this.selectedItems,folderPath:this.folderPath,targetPath:e}:{selectedItems:[this.singleSelectedItem],folderPath:this.folderPath,targetPath:e};let n={...this.headers,...this.defaultHeaders};const o=await fetch(this.settings.moveFilesUrl,{method:"POST",body:JSON.stringify(t),headers:n}),i=await o.json();if(i.error)console.log(i.error);else{this.fetchFolderContents(this.folderPath);const e=document.querySelector(".pop-movefiles");this.hidePop(e)}}async rename(){if(this.demoMode)return void alert(this.out("This function is disabled in this demo."));let e;e=this.isToggleOn&&this.selectedItems.length>0?this.selectedItems[0]:this.singleSelectedItem;const t=document.querySelector(".inp-rename-to");if(t===t.value){const e=document.querySelector(".pop-rename");return void this.hidePop(e)}const n={currentName:e,newName:t.value,folderPath:this.folderPath};let o={...this.headers,...this.defaultHeaders};const i=await fetch(this.renameFileUrl,{method:"POST",body:JSON.stringify(n),headers:o}),l=await i.json();l.error&&console.log(l.error);const s=document.querySelector(".pop-rename");this.hidePop(s),this.fetchFolderContents(this.folderPath)}async deleteSelected(){if(this.demoMode)return void alert(this.out("This function is disabled in this demo."));let e;e=this.isToggleOn&&this.selectedItems.length>0?{selectedItems:this.selectedItems,folderPath:this.folderPath}:{selectedItems:[this.singleSelectedItem],folderPath:this.folderPath};let t={...this.headers,...this.defaultHeaders},n=await fetch(this.settings.deleteFilesUrl,{method:"POST",body:JSON.stringify(e),headers:t});const o=await n.json();o.error?console.log(o.error):this.fetchFolderContents(this.folderPath)}async createFolder(){if(this.demoMode)return void alert(this.out("This function is disabled in this demo."));const e=document.querySelector(".inp-folder-name");if(!e.value)return void alert(this.out("Please enter a folder name."));const t={folderName:e.value,folderPath:this.folderPath};let n={...this.headers,...this.defaultHeaders};const o=await fetch(this.settings.createFolderUrl,{method:"POST",body:JSON.stringify(t),headers:n}),i=await o.json();if(i.error)console.error("Error:",i.error);else{e.value="";const t=document.querySelector(".pop-folder");this.hidePop(t),setTimeout((()=>{this.fetchFolderContents(this.folderPath)}),300)}}handleFileDrop(e){if(e.preventDefault(),this.demoMode)return void alert(this.out("This function is disabled in this demo."));const t=e.dataTransfer.items,n=[];for(let e=0;e<t.length;e++){const o=t[e];if("file"===o.kind){const e=o.getAsFile(),t=e.name;let i=e.type;if(!i||""===i){"md"===t.split(".").pop().toLowerCase()&&(i="text/markdown")}this.settings.allowedFileTypes.includes(i)?n.push(e):alert(`The file '${e.name}' is not allowed and will not be uploaded.`)}}n.length>0&&this.uploadFiles(n)}handleDragOver(e){e.preventDefault()}uploadFiles(e){const t=new FormData;Array.from(e).forEach((e=>{t.append("file[]",e)})),t.append("folderPath",this.folderPath);const n=document.querySelector(".is-progress-bar");n.style.display="",this.upload(t).then((()=>{this.fetchFolderContents(this.folderPath),setTimeout((()=>{n.style.display="none",n.value=0}),600)})).catch((e=>{console.error("Upload failed",e),n.style.display="none"}))}upload(e){return new Promise(((t,n)=>{const o=new XMLHttpRequest;o.open("POST",this.settings.uploadFilesUrl);let i={...this.headers,...this.defaultHeaders};Object.keys(i).forEach((e=>{"content-type"!==e.toLowerCase()&&o.setRequestHeader(e,i[e])})),o.upload.addEventListener("progress",(e=>{if(e.lengthComputable){const t=e.loaded/e.total*100;document.querySelector(".is-progress-bar").value=t}})),o.onload=function(){200===o.status?t(o.responseText):n(new Error("Upload failed."))},o.onerror=function(){n(new Error("Upload failed."))},o.send(e)}))}initializeDropZone(){const e=document.body;e.addEventListener("dragover",(e=>{this.handleDragOver(e)})),e.addEventListener("drop",(e=>{this.handleFileDrop(e)}))}out(e){if(!parent._cb){let t;return this.settings.lang&&(t=this.settings.lang[e]),t||e}return parent._cb.out(e)}}}();
